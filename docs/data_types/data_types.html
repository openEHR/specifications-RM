<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="description" content="openEHR Data Types Information Model specification">
<meta name="keywords" content="EHR, clinical, data types, openehr">
<title>Data Types Information Model</title>
<link rel="stylesheet" href="http://www.openehr.org/releases/BASE/latest/resources/css/openehr.css">
<link rel="stylesheet" href="http://www.openehr.org/releases/BASE/latest/resources/css/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_data_types_information_model">Data Types Information Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a></li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_conformance">1.4. Conformance</a></li>
</ul>
</li>
<li><a href="#_background">2. Background</a>
<ul class="sectlevel2">
<li><a href="#_scope">2.1. Scope</a></li>
<li><a href="#_design_criteria">2.2. Design Criteria</a></li>
<li><a href="#_prior_work">2.3. Prior Work</a></li>
</ul>
</li>
<li><a href="#_introduction">3. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_overview">3.1. Overview</a></li>
<li><a href="#_package_structure">3.2. Package Structure</a></li>
</ul>
</li>
<li><a href="#_basic_package">4. Basic Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements">4.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_bi_state_values">Bi-state Values</a></li>
<li><a href="#_state_machine_states">State Machine States</a></li>
<li><a href="#_real_world_entity_identification">Real-world Entity Identification</a></li>
</ul>
</li>
<li><a href="#_design">4.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_class_descriptions">4.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_data_value_class">4.2.1. DATA_VALUE Class</a></li>
<li><a href="#_dv_boolean_class">4.2.2. DV_BOOLEAN Class</a></li>
<li><a href="#_dv_state_class">4.2.3. DV_STATE Class</a></li>
<li><a href="#_dv_identifier_class">4.2.4. DV_IDENTIFIER Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_text_package">5. Text Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">5.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_2">5.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_narrative_text">Narrative Text</a></li>
<li><a href="#_terminological_entities">Terminological Entities</a></li>
</ul>
</li>
<li><a href="#_design_2">5.1.2. Design</a></li>
<li><a href="#_qualification">5.1.3. Qualification</a></li>
<li><a href="#_meaning_modification">5.1.4. Meaning Modification</a>
<ul class="sectlevel4">
<li><a href="#_mode_changing_terms">Mode-changing Terms</a></li>
<li><a href="#_context_sensitivity">Context Sensitivity</a></li>
<li><a href="#_negation">Negation</a></li>
<li><a href="#_representation_of_meaning_modifying_terms">Representation of Meaning-Modifying Terms</a></li>
</ul>
</li>
<li><a href="#_mappings">5.1.5. Mappings</a>
<ul class="sectlevel4">
<li><a href="#_classification_broader_terms">Classification (Broader Terms)</a></li>
<li><a href="#_equivalent_synonymous_terms">Equivalent / Synonymous Terms</a></li>
<li><a href="#_more_specific_mappings_narrower_terms">More Specific Mappings (Narrower Terms)</a></li>
<li><a href="#_the_unified_medical_language_system_umls">The Unified Medical Language System (UMLS)</a></li>
<li><a href="#_legacy_mapping_scenarios">Legacy Mapping Scenarios</a></li>
</ul>
</li>
<li><a href="#_language_translations">5.1.6. Language Translations</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_2">5.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_text_class">5.2.1. DV_TEXT Class</a></li>
<li><a href="#_term_mapping_class">5.2.2. TERM_MAPPING Class</a></li>
<li><a href="#_code_phrase_class">5.2.3. CODE_PHRASE Class</a></li>
<li><a href="#_dv_coded_text_class">5.2.4. DV_CODED_TEXT Class</a></li>
<li><a href="#_dv_paragraph_class">5.2.5. DV_PARAGRAPH Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_quantity_package">6. Quantity Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">6.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_3">6.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_ordinal_values">Ordinal Values</a></li>
<li><a href="#_countable_things">Countable Things</a></li>
<li><a href="#_dimensioned_quantities">Dimensioned Quantities</a></li>
<li><a href="#_ratios_and_proportions">Ratios and Proportions</a></li>
<li><a href="#_formulations">Formulations</a></li>
<li><a href="#_quantity_ranges">Quantity Ranges</a></li>
<li><a href="#_reference_ranges">Reference Ranges</a></li>
<li><a href="#_normal_range_and_status_in_laboratory_data">Normal Range and Status in Laboratory data</a></li>
</ul>
</li>
<li><a href="#_design_3">6.1.2. Design</a>
<ul class="sectlevel4">
<li><a href="#_basic_semantics">Basic Semantics</a></li>
<li><a href="#_accuracy_and_uncertainty">Accuracy and Uncertainty</a></li>
<li><a href="#_quantity_ranges_2">Quantity Ranges</a></li>
<li><a href="#_proportions">Proportions</a></li>
<li><a href="#_normal_and_reference_ranges">Normal and Reference Ranges</a></li>
<li><a href="#_recording_time">Recording Time</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_3">6.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_ordered_class">6.2.1. DV_ORDERED Class</a></li>
<li><a href="#_dv_interval_class">6.2.2. DV_INTERVAL Class</a></li>
<li><a href="#_reference_range_class">6.2.3. REFERENCE_RANGE Class</a></li>
<li><a href="#_dv_ordinal_class">6.2.4. DV_ORDINAL Class</a></li>
<li><a href="#_dv_quantified_class">6.2.5. DV_QUANTIFIED Class</a></li>
<li><a href="#_dv_amount_class">6.2.6. DV_AMOUNT Class</a></li>
<li><a href="#_dv_quantity_class">6.2.7. DV_QUANTITY Class</a></li>
<li><a href="#_dv_count_class">6.2.8. DV_COUNT Class</a></li>
<li><a href="#_dv_proportion_class">6.2.9. DV_PROPORTION Class</a></li>
<li><a href="#_proportion_kind_class">6.2.10. PROPORTION_KIND Class</a></li>
<li><a href="#_dv_absolute_quantity_class">6.2.11. DV_ABSOLUTE_QUANTITY Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes">6.3. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_units_syntax">6.3.1. Units Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_date_time_package">7. Date Time Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">7.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_4">7.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_standard_date_times">Standard Date/Times</a></li>
<li><a href="#_partial_date_times">Partial Date/Times</a></li>
</ul>
</li>
<li><a href="#_design_4">7.1.2. Design</a>
<ul class="sectlevel4">
<li><a href="#_general_approach">General Approach</a></li>
<li><a href="#_partial_date_times_2">Partial Date/Times</a></li>
<li><a href="#_calendars">Calendars</a></li>
<li><a href="#_representation">Representation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_4">7.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_temporal_class">7.2.1. DV_TEMPORAL Class</a></li>
<li><a href="#_dv_date_class">7.2.2. DV_DATE Class</a></li>
<li><a href="#_dv_time_class">7.2.3. DV_TIME Class</a></li>
<li><a href="#_dv_date_time_class">7.2.4. DV_DATE_TIME Class</a></li>
<li><a href="#_dv_duration_class">7.2.5. DV_DURATION Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_time_specification_package">8. Time_specification Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">8.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_5">8.1.1. Requirements</a></li>
<li><a href="#_design_5">8.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_5">8.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_time_specification_class">8.2.1. DV_TIME_SPECIFICATION Class</a></li>
<li><a href="#_dv_periodic_time_specification_class">8.2.2. DV_PERIODIC_TIME_SPECIFICATION Class</a></li>
<li><a href="#_dv_general_time_specification_class">8.2.3. DV_GENERAL_TIME_SPECIFICATION Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes_2">8.3. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_phase_linked_time_specification_syntax">8.3.1. Phase-linked Time Specification Syntax</a></li>
<li><a href="#_event_linked_periodic_time_specification_syntax">8.3.2. Event-linked Periodic Time Specification Syntax</a></li>
<li><a href="#_general_time_specification_syntax">8.3.3. General Time Specification Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_encapsulated_package">9. Encapsulated Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_7">9.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_6">9.1.1. Requirements</a></li>
<li><a href="#_design_6">9.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_6">9.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_encapsulated_class">9.2.1. DV_ENCAPSULATED Class</a></li>
<li><a href="#_dv_multimedia_class">9.2.2. DV_MULTIMEDIA Class</a></li>
<li><a href="#_dv_parsable_class">9.2.3. DV_PARSABLE Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_uri_package">10. Uri Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_8">10.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_7">10.1.1. Requirements</a></li>
<li><a href="#_design_7">10.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_definitions">10.2. Definitions</a></li>
<li><a href="#_class_descriptions_7">10.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_uri_class">10.3.1. DV_URI Class</a></li>
<li><a href="#_dv_ehr_uri_class">10.3.2. DV_EHR_URI Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes_3">10.4. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_dv_ehr_uri_syntax">10.4.1. DV_EHR_URI Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_implementation_strategies">11. Implementation Strategies</a>
<ul class="sectlevel2">
<li><a href="#_overview_9">11.1. Overview</a></li>
<li><a href="#_quantities_and_ordered_numeric">11.2. Quantities and Ordered_numeric</a></li>
<li><a href="#_unicode">11.3. Unicode</a></li>
<li><a href="#_dates_and_times">11.4. Dates and Times</a></li>
</ul>
</li>
<li><a href="#_comparison_with_hl7v3_types">Appendix A: Comparison with HL7v3 Types</a>
<ul class="sectlevel2">
<li><a href="#_scope_2">A.1. Scope</a></li>
<li><a href="#_design_differences">A.2. Design Differences</a>
<ul class="sectlevel3">
<li><a href="#_naming">A.2.1. Naming</a></li>
<li><a href="#_identification">A.2.2. Identification</a></li>
<li><a href="#_archetyping">A.2.3. Archetyping</a></li>
<li><a href="#_treatment_of_inbuilt_types">A.2.4. Treatment of Inbuilt Types</a></li>
<li><a href="#_use_of_null_markers">A.2.5. Use of Null Markers</a></li>
<li><a href="#_terminology_approach">A.2.6. Terminology Approach</a></li>
<li><a href="#_date_time_approach">A.2.7. Date/Time Approach</a></li>
<li><a href="#_time_specification_types">A.2.8. Time Specification Types</a></li>
<li><a href="#_type_conversions">A.2.9. Type Conversions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_references">References</a>
<ul class="sectlevel2">
<li><a href="#_publications">Publications</a></li>
<li><a href="#_resources">Resources</a>
<ul class="sectlevel3">
<li><a href="#_ontology">Ontology</a></li>
<li><a href="#_general">General</a></li>
<li><a href="#_e_health_standards">e-Health Standards</a></li>
<li><a href="#_e_health_projects">e-Health Projects</a></li>
<li><a href="#_general_standards">General Standards</a></li>
</ul>
</li>
<li><a href="#_openehr_resources">openEHR Resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="http://www.openehr.org/releases/BASE/latest/resources/images/openehr_logo_large.png" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_data_types_information_model" class="sect0">Data Types Information Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><strong>Issuer</strong>: <a href="http://www.openehr.org/programs/specification/">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: STABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>Keywords</strong>: EHR, clinical, data types, openehr</p></td>
</tr>
</tbody>
</table>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="diagrams/openehr_block_diagram.png" alt="openEHR components" width="60%">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2003 - 2015 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://www.openehr.org/">The openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of health records by consumers and clinicians via open-source, standards-based implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="http://www.openehr.org/releases/BASE/latest/resources/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://openehr.atlassian.net/browse/SPECPR/" class="bare">https://openehr.atlassian.net/browse/SPECPR/</a><br>
 Web: <a href="http://www.openehr.org/" class="bare">http://www.openehr.org/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9%;">
<col style="width: 54%;">
<col style="width: 18%;">
<col style="width: 18%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.3</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>2.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPECRM-23">SPECRM-23</a> Add invariant to DV_PROPORTION preventing 0 denominator. (<a href="https://openehr.atlassian.net/browse/SPECPR-112">SPECPR-112</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P Pazos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>28 Oct 2015</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPECRM-32">SPECRM-32</a>: Correct wrong <code>DV_DATE.<em>magnitude</em></code> origin to '0001-01-01' (<a href="https://openehr.atlassian.net/browse/SPECPR-64">SPECPR-64</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P Gummer</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openehr.atlassian.net/browse/SPECRM-20">SPECRM-20</a>: Correct wrong <code>DV_DATE.<em>magnitude</em></code> origin to '0001-01-01' (<a href="https://openehr.atlassian.net/browse/SPECPR-64">SPECPR-64</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P Gummer</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.2</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SPEC-257</strong>: Correct minor typos and clarify text. Replace <code>DV_EHR_URI</code> with <code>DV_URI</code> in inheritance of class definition of <code>DV_EHR_URI</code>.<br>
 Clarify the description of the type attribute in <code>DV_PROPORTION</code> to indicate how it is controlled by <code>PROPORTION_KIND</code>.  Add <code><em>as_string()</em></code> function to <code>DV_ENCAPSULATED</code> class in UML diagram of encapsulated package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Cook<br>
 C Ma,<br>
 R Chen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Nov 2008</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SPEC-261</strong>: Indicate how accuracy is treated over add/subtract operations in <code>DV_QUANTIFIED</code> types. Indicate special values for unknown accuracy.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Geurts,<br>
 R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.1</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000144</strong>: Add new type: <code>DV_PROPORTION</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 Apr 2007</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000198</strong>: Change DV_Date/Time/Duration to have value as attribute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000199</strong>: Add normal_range attribute to <code>DV_ORDERED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000200</strong>. Correct Release 1.0 typographical errors. Correct <code>DV_ENCAPSULATED</code>.<code><em>size</em></code> to abstract in definition table. Correct <code>DV_STATE</code>.<code><em>value</em></code> in UML of <code>basic</code> package to be <code>DV_CODED_TEXT</code>. Correct <code>DV_ORDINAL</code>.<code><em>symbol</em></code> type to <code>DV_CODED_TEXT</code> in UML diagram for <code>QUANTITY</code> package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel<br>
 S Heard<br>
 G Grieve<br>
 D Lloyd<br>
 R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add missing inheritance of <code>Ordered</code> to <code>DV_ORDERED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000205</strong>: Convert Date/time constants to a class.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000211</strong>: Add <code><em>magnitude_status</em></code> to <code>DV_QUANTIFIED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000215</strong>: Merge <code>DV_PARTIAL_XX</code> date/time classes and move ISO 8601 semantics to Support IM. Remove <code>DV_WORLD_TIME</code> class.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000216</strong>: Allow mixture of W, D etc in ISO8601 Duration (deviation from standard).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000219</strong>: Use constants instead of literals to refer to terminology in RM.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000221</strong>. Add normal_status to <code>DV_ORDERED</code>. Adjusted invariants.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000227</strong>: Remove <code>DV_QUANTITY_RATIO</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000230</strong>: Change <code>DV_DATE_TIME</code>.<code><em>to_quantity</em></code> to seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C Ma</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000236</strong>: Change use of Character to Octet in <code>DV_MULTIMEDIA</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000237</strong>: Correct semantics of Quantity and Date/Time types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 G Grieve</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000240</strong>: Allow <code>DV_ORDINAL</code> values to be negative.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000247</strong>: Add <code>DV_TEMPORAL</code> class to <code>quantity</code> package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000176</strong>. Make <code>DV_QUANTIFIED</code>.<code><em>accuracy</em></code> optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Feb 2006</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000163</strong>. Add identifiers to <code>FEEDER_AUDIT</code> for originating and gateway systems. Added <code><em>assigner</em></code> attribute to <code>DV_IDENTIFIER</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000121</strong>. Improve <code>DV_EHR_URI</code> model to support Xpath style paths.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000161</strong>. Support distributed versioning. Remove functions from <code>DV_EHR_URI</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.96</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.95</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.9.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Improve implementation guidance. <code>DV_ORDINAL</code>.<code><em>limits</em></code> type corrected to <code>REFERENCE_RANGE&lt;DV_ORDINAL&gt;</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22 Feb 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000126</strong>. Correct details of partial date/time classes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Dec 2004</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000112</strong>. Add <code>DV_PARTIAL_DATE_TIME</code> class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000113</strong>. Add <code>DATA_VALUE</code> subtype for identifying realworld entities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000118</strong>. Make package names lower case.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000119</strong>. Improve Data types documentation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000102</strong>. Make <code>DV_TEXT</code>.<code><em>language</em></code> and <code><em>charset</em></code> optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.9</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000023</strong>. <code>TERM_MAPPING</code>.<code><em>match</em></code> should be coded/enumerated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Mar 2004</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000069</strong>. Correct date/time types statistical descriptions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Goodchild</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000046</strong>. Rename <code>COORDINATED_TERM</code> to <code>CODE_PHRASE</code> and <code>DV_CODED_TEXT</code>.<code><em>definition</em></code> to <code><em>defining_code</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000084</strong>. Rename <code>DV_COUNTABLE</code> to <code>DV_COUNT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000090</strong>. Make <code>TERM_MAPPING</code>.<code><em>purpose</em></code> optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000091</strong>. Correct anomalies in use of <code>CODE_PHRASE</code> and <code>DV_CODED_TEXT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000094</strong>. Add <code><em>lifecycle</em></code> state attribute to <code>VERSION</code>; correct <code>DV_STATE</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000095</strong>. Remove <code><em>property</em></code> attribute from <code>quantity</code> package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formally validated using ISE Eiffel 5.4.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000066</strong>. Make <code>DV_ORDERED</code>.<code><em>normal_range</em></code> a function.<br>
 Correct UML for <code>DV_QUANTITY</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000053</strong>. Make <code>DV_ORDINAL</code>.<code><em>limits</em></code> a function.<br>
 <strong>CR-000054</strong>. Move <code>DV_QUANTIFIED</code>.<code><em>is_normal</em></code> to <code>DV_ORDERED</code><br>
 <strong>CR-000055</strong>. Redefine <code>DV_ORDERED</code>.<code><em>less_than</em></code> as infix function '&lt;'.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02 Nov 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000041</strong>. Visually differentiate primitive types in openEHR documents.<br>
 <strong>CR-000034</strong>. State representation of date/time classes to be ISO8601.<br>
 <strong>CR-000052</strong>. Change <code>DV_DURATION</code>.<code><em>sign</em></code> to prefix "-" operation.<br>
 <strong>CR-000042</strong>. Make <code>DV_ORDINAL</code>.<code><em>rubric</em></code> a <code>DV_CODED_TEXT</code>; <code><em>type</em></code> attribute not needed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd,<br>
 DSTC,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26 Oct 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000013</strong>. Rename key classes, according to CEN ENV 13606.<br>
 <strong>CR-000026</strong>. Rename <code>DV_QUANTITY</code>.<code><em>value</em></code> to <code><em>magnitude</em></code>.<br>
 <strong>CR-000031</strong>. Change abstract <code>NUMERIC</code> to <code>DOUBLE</code> in <code>DV_QUANTITY</code>.<code><em>value</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 D Kalra,<br>
 T Beale,<br>
 A Goodchild,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Oct 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000022</strong>. Code <code>TERM_MAPPING</code>.<code><em>purpose</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jun 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000020</strong>. Move <code>VERSION</code>.<code><em>charset</em></code> to <code>DV_TEXT</code>, <code><em>territory</em></code> to <code>TRANSACTION</code>. Remove <code>VERSION</code>.<code><em>language</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Goodchild</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Jun 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_INTERVAL</code> now inherits from <code>INTERVAL</code> to avoid duplicating semantics. (Formally validated).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25 Mar 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections to diagrams in Text package. Improved heading structure, package naming. Corrected error in <code>text</code> package diagram. Replaced <code>TEXT_FORMAT_PROPERTY</code> class with string attribute of same form. Made <code>MULTIMEDIA</code>.<code><em>media_type</em></code> mandatory.  (Formally validated).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 Mar 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moved definitions and assumed types to Support Reference Model. No semantic changes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25 Feb 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formally validated using ISE Eiffel 5.2.<br>
 <strong>CR-000001</strong>. Review of Data Types specification.  Made pluralities of Terminology name definitions (sect 3.2.1) consistent.<br>
 Corrected types of <code>DV_ENCAPSULATED</code>.<code><em>language</em></code>, <code><em>charset</em></code>, <code>DV_MULTIMEDIA</code>.<code><em>integrity_check_algorithm</em></code>, <code><em>compression_algorithm</em></code>, <code><em>media_type</em></code>.<br>
 Corrected pluralities of Terminology name definitions (sect 3.2.1).<br>
 Corrected invariants of <code>DV_ENCAPSULATED</code>, <code>DV_MULTI_MEDIA</code>, <code>DV_QUANTITY</code>, <code>DV_CODED_TEXT</code>, <code>DV_TEXT</code>, <code>DV_INTERVAL</code>, <code>TERM_MAPPING</code>.<br>
 Corrected <code>DV_TEXT</code>.<code><em>formatting</em></code>; added <code>TERM_MAPPING</code> validity function. Made <code>DV_ORDINAL</code>.<code><em>limits</em></code> an attribute. Removed <code>TERM_MAPPING</code>.<code><em>source</em></code>; moved <code>COORDINATED_TERM</code>.<code><em>language</em></code> to <code>DV_TEXT</code>; changed type to <code>COOORDINATED_TERM</code>.<br>
 Corrected time specification classes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z Tun,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17 Feb 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rome CEN TC 251 meeting. Updates to HL7 comparison text. <code>DV_DATE</code> now inherits from <code>DV_CUSTOMARY_QUANTITY</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27 Jan 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sam Heard complete review. Changed constant terminology defs to runtime-evaluated set; removed <code>DV_PHYSICAL_DATA</code>.  Added new chapter for generic implementation guidelines, and new section for assumed types. Post-conditions moved to invariants: <code>DV_TEXT</code>.<code><em>value</em></code>, <code>DV_ORDERED</code>.<code><em>is_simple</em></code>, <code>DV_PARTIAL_DATE</code>.<code><em>probable_date</em></code>, possible_dates, <code>DV_PARTIAL_TIME</code>.<code><em>probable_time</em></code>, possible_times. Minor updates to HL7 comparison text. Added explanation to HL7 section.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13 Dec 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections: <code>DV_ENCAPSULATED</code>; <code>DV_QUANTITY</code>.<code><em>units</em></code> defined to be String; changed <code>COORDINATED_TERM</code> class (but semantically equivalent).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changed name of LINK package to URI. Major update to Text cluster classes and explanation. Updated HL7 data type comparison.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Kalra,<br>
 D Lloyd,<br>
 M Darlison</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Nov 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_TEXT_LIST</code> reverted to <code>TEXT_LIST</code>. <code>DV_LINK</code> no longer a data types; renamed to <code>LINK</code> and moved to Common RM. <code>link</code> package renamed to <code>uri</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 Z Tun,<br>
 T Beale,<br>
 D Kalra,<br>
 M Darlison</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Oct 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rewrite of <code>TIME_SPECIFICATION</code> parse specs. Adjustments to <code>DV_ORDINAL</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 Sep 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timezone not allowed on pure <code>DV_DATE</code> in ISO8601.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 Sep 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moved <code>DV_QUANTIFIED</code>.<code><em>units</em></code> and property attributes to <code>DV_QUANTITY</code>. Introduced <code>DV_WORLD_TIME</code>.<code><em>to_quantity</em></code>. Added <code><em>fractional_second</em></code> to <code>DV_TIME</code>, <code>DV_DATE_TIME</code>, <code>DV_DURATION</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Further corrections - removed derived ‘/’ markers; renamed <code>TERM_MAPPING</code>.<code><em>granularity</em></code> to match. Improved explanation of <code>DV_ORDINAL</code>. <code>DV_QUANTIFIED</code>.<code><em>units</em></code> is now a <code>DV_PARSABLE</code>.  <code>REFERENCE_RANGE</code>.<code><em>meaning</em></code> is now a <code>DV_TEXT</code>.  <code>DV_ENCAPSULATED</code>.<code><em>uri</em></code> is now a <code>DV_URI</code>. <code>DV_LINK</code>.<code><em>type</em></code> is now a <code>DV_TEXT</code>. Detailed review by Zar Zar Tun (DSTC).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard,<br>
 P Schloeff +el,
 D Lloyd,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Further corrections - removed derived ‘/’ markers; renamed <code>TERM_MAPPING</code>.<code><em>granularity</em></code> to match.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rewrite of section describing text types; addition of new attribute <code>DV_CODED_TEXT</code>.<code><em>mappings</em></code>. Removal of <code>TERM_REFERENCE</code>.<code><em>concept_code</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor changes to text. Corrections to <code>DV_CODED_TEXT</code> relationships.  Made <code>DV_INTERVAL</code>.<code><em>lower_unbounded</em></code> and <code>DV_INTERVAL</code>.<code><em>upper_unbounded</em></code> functions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_LINK</code>.<code><em>meaning</em></code> changed to <code>DV_TEXT</code> (typo in table). Added abstract class <code>DV_WORLD_TIME</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changes to <code>DV_ENCAPSULATED</code>, <code>DV_PARSABLE</code> invariants.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_ENCAPSULATED</code>. text_equivalent renamed to <code>DV_ENCAPSULATED</code>.<code><em>alternate_text</em></code>. Added invariant for <code>QUANTITY</code>.<code><em>precision</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added timezone to <code>DV_TIME</code> and <code>DV_DATE_TIME</code> and sign to <code>DV_DURATION</code>; added linguistic_order to <code>TERM_RELATION</code>; added as_display_string and <code><em>as_canonical_string</em></code> to all types.  Added <code>DV_STATE</code>.<code><em>is_terminal</em></code>. Renamed <code>TERM_TEXT</code> as <code>CODED_TEXT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 Jun 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections to Text package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 May 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numerous small changes, including: term equivalents, relationships and quantity reference ranges.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd,<br>
 D Kalra,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 May 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separated from the openEHR Reference Model.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 May 2002</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The work reported in this paper has been funded in by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>University College London - Centre for Health Informatics and Multi-professional Education (CHIME);</p>
</li>
<li>
<p>Ocean Informatics;</p>
</li>
<li>
<p>Distributed Systems Technology Centre (DSTC), under the Cooperative Research Centres Program through the Department of the Prime Minister and Cabinet of the Commonwealth Government of Australia.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Special thanks to Prof David Ingram, head of CHIME, who provided a vision and collegial working environment ever since the days of GEHR (1992).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document defines the openEHR Data Types Information Model, used throughout the openEHR Reference Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standards bodies producing health informatics standards;</p>
</li>
<li>
<p>Academic groups using openEHR;</p>
</li>
<li>
<p>The open source healthcare community;</p>
</li>
<li>
<p>Solution vendors;</p>
</li>
<li>
<p>Medical informaticians and clinicians interested in health information.</p>
</li>
<li>
<p>Health data managers.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The openEHR Architecture Overview (<a href="#openehr_overview">[openehr_overview]</a>);</p>
</li>
<li>
<p>The openEHR Support Information Model (<a href="#openehr_rm_support">[openehr_rm_support]</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the Stable state. The development version of this document can be found at <a href="http://www.openehr.org/releases/RM/latest/data_types.html" class="bare">http://www.openehr.org/releases/RM/latest/data_types.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
<div class="paragraph">
<p>Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.  Feedback should be provided either on the <a href="http://lists.openehr.org/mailman/listinfo/openehr-technical_lists.openehr.org">technical mailing list</a>, or on the <a href="https://openehr.atlassian.net/browse/SPECPR/?selectedTab=com.atlassian.jira.jira-projects-plugin:issues-panel">specifications issue tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.4. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an openEHR Reference Model specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal, automated derivations from the Reference Model, ITS conformance indicates RM conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_background"><a class="anchor" href="#_background"></a>2. Background</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_scope"><a class="anchor" href="#_scope"></a>2.1. Scope</h3>
<div class="paragraph">
<p>The data type specification presented here defines the clinical/scientific data types which are used in
other openEHR models. Harmonisation of data types between information models used by related
services in a health information infrastructure is essential to reducing the conversion work and potential
for errors between these services. Accordingly, the openEHR data type specification is intended to
work not only for the EHR, but also for other models defined by openEHR, such as the openEHR
demographic and terminological models.</p>
</div>
<div class="paragraph">
<p>The types described here have been derived from data types used in the GEHR <a href="#GeHR_Aus_req">[GeHR_Aus_req]</a>, Synapses and
SynEx <a href="#EHCR_supA_35">[EHCR_supA_35]</a>, CEN 13606 <a href="#ENV_13606-1">[ENV_13606-1]</a>, <a href="#ENV_13606-3">[ENV_13606-3]</a> and the HL7v3 <a href="#HL7v3_data_types">[HL7v3_data_types]</a> reference models.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_criteria"><a class="anchor" href="#_design_criteria"></a>2.2. Design Criteria</h3>
<div class="paragraph">
<p>Over and above the need to satisfy the functional requirements of clinical data, three concerns have
driven the design of the openEHR data types:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>clarity of expression</p>
</li>
<li>
<p>ease of implementation</p>
</li>
<li>
<p>interoperability with data types from other standards</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first of these has led to models which try to clearly convey the semantics of types required by the
clinical domain. The use of constraints (pre- and post-conditions and class invariants) and a comprehensible
class structure ensures formal self-consistency, correct type-substitutability and implementability
in object-oriented formalisms. Types have been designed so as not to clash with norms of
object-oriented languages and libraries, in particular, class names and the inbuilt types. Accordingly,
all types presented here have a logical name commencing with <code>DV_</code>, ensuring that there is no clash
with a type in the implementation formalism, hence the type <code>DV_DATE</code> presented here will not be confused
with the type <code>DATE</code> which appears in many programming languages or libraries.</p>
</div>
<div class="paragraph">
<p>Object-oriented languages which have been considered include IDL, C++, Java, C#, Eiffel, Delphi
and Python. Each of these languages obeys some variant of the well-known semantics of classes,
encapsulation, typing and inheritance. The data types described here follow the tenets of object-orientation
defined in UML most closely, while being careful not to invalidate their implementation in
any language. The models have all been validated by implementation in the Eiffel language, the closest
available semantic fit for UML, and currently the most powerful of mainstream object-oriented
formalisms.</p>
</div>
<div class="paragraph">
<p>Implementability in XML-schema has also been an important design criterion, and the current data
types remove many of the problems which the GEHR and CEN data types presented for XMLschema.
There has been no attempt to support XML-DTD, since it has no type system, and cannot
reliably be reasoned about in an object-oriented way.</p>
</div>
<div class="paragraph">
<p>To simplify implementation in all object-oriented formalisms, including IDL, programming languages
and XML-schema, multiple inheritance has generally been avoided (where it is used, only onr
branch corresponds to substitutability). Generic classes have been used, since they significantly clarify
the model. Type genericity is available in Java, C#, Eiffel, C++, and some other languages. For
languages not having it, there is a well-known transformation from models containing generic classes
to classes for non-generic types systems.</p>
</div>
<div class="paragraph">
<p>Implementability in relational databases has also been considered, and appears relatively straightforward,
since only the data view of the types needs to be represented. Many implementations are likely
to use only a single String or XML string to represent each entire data instance, which significantly
simplifies things.</p>
</div>
</div>
<div class="sect2">
<h3 id="_prior_work"><a class="anchor" href="#_prior_work"></a>2.3. Prior Work</h3>
<div class="paragraph">
<p>Four other type systems for clinical data, namely the GEHR data types, the HL7 v3 data types, the
CEN 13606 data item types, and the Corbamed data types were carefully scrutinised in order to
ensure a) that all needed types were covered in the openEHR specification, and b) that data conversion
will be possible. Concepts from all three are cross-referenced throughout this specification where
possible.</p>
</div>
<div class="paragraph">
<p>Because the HL7v3 data type specification is a widely available and comprehensive specification for
clinican data types, particular attention has been paid to incorporating its semantics, as well as fixing
errors or shortcomings. While there are differences both in design approach and in detail, a significant
debt must be recognised to the authors of this work, from which many ideas in the present specification
were drawn. A detailed discussion is found under <a href="#_comparison_with_hl7v3_types">Comparison with HL7v3 Types</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>3. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview"><a class="anchor" href="#_overview"></a>3.1. Overview</h3>
<div class="paragraph">
<p>This specification describes a set of types suitable for use in scientific, clinical and related information
structures. In order for such types to exist, a set of primitive types is assumed, namely <code>Integer</code>,
<code>Real</code>, <code>Boolean</code>, <code>Character</code>, <code>Octet</code>, <code>String</code>, <code>List&lt;T&gt;</code>, <code>Set&lt;T&gt;</code>, and <code>Array&lt;T&gt;</code>. These have
standard definitions in the OMG object model used in UML, OCL, and are available in almost all
type systems. The exact assumptions are described in the openEHR Support Information Model. A
number of symbolic definitions (similar to constants in programming) are also described in the Support
IM.</p>
</div>
<div class="paragraph">
<p>The data types described here are named with the class prefix <code>DV_</code>, and inherit from the class
<code>DATA_VALUE</code>. They have two distinct uses in reference models. Firstly, they may be used as 'data
values' in reference model structures wherever the <code>DATA_VALUE</code> class appears, for example, in the
EHR Reference Model via the <code>ELEMENT</code>.<code><em>value</em></code> attribute. Additionally, specific subtypes of the data
types described here can also be used as attribute types in other classes in reference models, such as
date/times, coded terms and so on. The difference is that in the former case, only subtypes of
<code>DATA_VALUE</code> may be used, whilst in the latter case, other types may be used as well, from the
assumed set of basic types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_package_structure"><a class="anchor" href="#_package_structure"></a>3.2. Package Structure</h3>
<div class="paragraph">
<p>The package structure of the openEHR data types is illustrated below.</p>
</div>
<div id="rm_data_types_packages" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types-packages.svg" alt="RM data types packages">
</div>
<div class="title">Figure 1. rm.data_types packages</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_package"><a class="anchor" href="#_basic_package"></a>4. Basic Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>4.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.basic</code> package, illustrated below, contains types for the concepts of bistate,
state (in a state machine) and real-world entity identifiers (see the openEHR Common IM for a
discussion on identifier types).</p>
</div>
<div id="rm_data_types_basic" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types.basic.svg" alt="RM data types.basic">
</div>
<div class="title">Figure 2. rm.data_types.basic package</div>
</div>
<div class="sect3">
<h4 id="_requirements"><a class="anchor" href="#_requirements"></a>4.1.1. Requirements</h4>
<div class="sect4">
<h5 id="_bi_state_values"><a class="anchor" href="#_bi_state_values"></a>Bi-state Values</h5>
<div class="paragraph">
<p>One of the most basic types of data is boolean or bi-state data. The need here is for a type which both
includes a boolean value, and which inherits from the type <code>DATA_VALUE</code>, enabling it to be used as an
<code>ELEMENT</code>.<code><em>value</em></code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_state_machine_states"><a class="anchor" href="#_state_machine_states"></a>State Machine States</h5>
<div class="paragraph">
<p>A type is required to represent state values of a state machine. In a simple system of data types, a simple
integer would appear sufficient to perform this job. However, in an archetyped framework, a distinct
type is required, so that it can be archetyped not by the constraints used for integers, but by a
state machine definition instead. The type <code>DV_STATE</code> is provided for this purpose. An example of a
state machine which models the lifecycle of a medication order is illustrated in the figure below. This definition
would appear in an archetype; the values of a <code>DV_STATE</code> object are then restricted to the values
of the states in the definition.</p>
</div>
<div id="state_machine_med_order" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/state_machine.png" alt="state machine" width="80%">
</div>
<div class="title">Figure 3. Example State Machine for Medication Orders</div>
</div>
</div>
<div class="sect4">
<h5 id="_real_world_entity_identification"><a class="anchor" href="#_real_world_entity_identification"></a>Real-world Entity Identification</h5>
<div class="paragraph">
<p>Real world entities (RWEs) such as people, car engines, invoices, and appointments may all be
assigned identifiers. Although many of these are designed to be unique within a jurisdiction or issuing
space, they are often not, due to data entry errors, bad design (ids which are too small or incorporate
some non-unique characteristic of the identified entities), bad process (e.g. non-synchronised id issuing
points); identity theft (e.g. via theft of documents of proof or hacking). In general, while some real
world identifiers (RWIs) are "nearly unique", none can be guaranteed so. Therefore, from a strict
computatoinal point of view, RWIs are not treated as reliable identifiers, but as attributes of their
owning objects, in the same ways as names and addresses for example.</p>
</div>
<div class="paragraph">
<p>Examples of RWE identifiers which are intended to be unique within the space of the issuing authority
or organisation include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>driver&#8217;s licence id</p>
</li>
<li>
<p>social security number</p>
</li>
<li>
<p>passport number</p>
</li>
<li>
<p>prescription id</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The defining logical characteristic of RWE ids is that they continue to identify the entities in question,
regardless of how they change in time; for example a social security number does not change
when someone changes their hair colour or even their gender (both of which attributes may be
recorded in the database). In general it should be the case that if two RWE ids are equal, they refer to
the same RWE.</p>
</div>
<div class="paragraph">
<p>At a practical level, RWE identifiers differ from information entity (IE) identifiers in that the former
are generally not assigned by the computing infrastructure that uses them - that is to say, in the production
computing system, such identifiers are no different from other characteristics of the entity,
such as names or addresses.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design"><a class="anchor" href="#_design"></a>4.1.2. Design</h4>
<div class="paragraph">
<p>The model defined here in the <code>DV_IDENTIFIER</code> class allows the recording of three things as part of identifying an item of interest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the identifier given to the item of interest (mandatory).</p>
</li>
<li>
<p>the issuing authority of the kind of id used (e.g. it might be the federal department of health) (optional);</p>
</li>
<li>
<p>the assigner of the id to the item being identified. This is usually the organisation which created the item being identified (optional);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, the type of item being identified can also be recorded.</p>
</div>
<div class="paragraph">
<p>See the Support IM <a href="#openehr_rm_support">[openehr_rm_support]</a> specification for a further discussion of RWEs and IEs, and the definition of IEs in openEHR.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>4.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_data_value_class"><a class="anchor" href="#_data_value_class"></a>4.2.1. DATA_VALUE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DATA_VALUE (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Serves as a common ancestor of all data value types in openEHR models.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">OPENEHR_DEFINITIONS</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_boolean_class"><a class="anchor" href="#_dv_boolean_class"></a>4.2.2. DV_BOOLEAN Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_BOOLEAN</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Items which are truly boolean data, such as true/false or yes/no answers. For such data, it is important to devise the meanings (usually questions in subjective data)  carefully, so that the only allowed results are in fact true or false.</p>
</div>
<div class="paragraph">
<p>Misuse: The DV_BOOLEAN class should not be used as a replacement for naively modelled enumerated types such as male/female etc. Such values should be coded, and in any case the enumeration often has more than two values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Boolean value of this item. Actual values may be language or implementation dependent.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_state_class"><a class="anchor" href="#_dv_state_class"></a>4.2.3. DV_STATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_STATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>For representing state values which obey a defined state machine, such as a variable  representing the states of an instruction or care process.</p>
</div>
<div class="paragraph">
<p>DV_STATE is expressed as a String but its values are driven by archetype-defined  state machines. This provides a powerful way of capturing stateful complex processes  in simple data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The state name. State names are determined by a state/event table defined in archetypes, and coded using openEHR Terminology or local archetype terms, as specified by the archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_terminal</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Indicates whether this state is a terminal state, such as  "aborted",  "completed" etc. from which no further transitions are possible.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_identifier_class"><a class="anchor" href="#_dv_identifier_class"></a>4.2.4. DV_IDENTIFIER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_IDENTIFIER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Type for representing identifiers of real-world entities. Typical identifiers include drivers licence number, social security number, veterans affairs number, prescription id, order id, and so on.</p>
</div>
<div class="paragraph">
<p>DV_IDENTIFIER is used to represent any identifier of a real thing, issued by some authority or agency.</p>
</div>
<div class="paragraph">
<p>Misuse: DV_IDENTIFIER is not used to express identifiers generated by the infrastructure to refer to information items; the types OBJECT_ID and OBJECT_REF and subtypes are defined for this purpose.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>issuer</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional authority which issues the kind of id used in the id field of this object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assigner</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional organisation that assigned the id to the item being identified.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The identifier value. Often structured, according to the definition of the issuing authority&#8217;s rules.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional identifier type, such as  prescription , or  Social Security Number . One day a controlled vocabulary might be possible for this.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Issuer_valid</em></strong>: not issuer.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Assigner_valid</em></strong>: not assigner.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Id_valid</em></strong>: not id.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Type_valid</em></strong>: not type.is_empty</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_text_package"><a class="anchor" href="#_text_package"></a>5. Text Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.text</code> package contains classes for representing all textual values in the health
record, including plain text, coded terms, and narrative text. It is illustrated below.</p>
</div>
<div id="rm_data_types_text" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types.text.svg" alt="RM data types.text">
</div>
<div class="title">Figure 4. rm.data_types.text package</div>
</div>
<div class="sect3">
<h4 id="_requirements_2"><a class="anchor" href="#_requirements_2"></a>5.1.1. Requirements</h4>
<div class="paragraph">
<p>The sections below describe the requirements of text data types. Two overriding principles should be
noted at the outset with regard to text.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Regardless of what terminologies are (or are not) available to the clinician and/or the software, the primary requirement is that in all cases clinicians are able to record exactly what they want to say. This means that if they want to record something very general, such as "cold" or a very specific term such as "Ross River virus infection" they should be able to, whether or not the appropriate coded terms are available. However, the facility should be available to additionally code any such textual item, at the time or indeed at some later time, so as to satisfy reporting or other needs.</p>
</li>
<li>
<p>It is assumed that any client of terminology, such as the EHR, uses a terminology service which provides a complete interface to the terminology. The design of the <code>DV_CODED_TEXT</code> type reflects this. Accordingly, there is no concept of "post-coordination" outside the terminology environment allowed by the data types described here: the only thing that is available from the terminology service is a key which refers to a lexical entity, which may be a single term or a code phrase, and which may be part of a reference terminology and/or linked to element(s) of underlying ontologies. It is also assumed that there is no direct access to any particular terminology; access to all terminologies (whether simple coded lexicons or large semantic networks) is via the same abstract interface.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Terminology Ids are likely to be of various types.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Terminology Id = <code>"local"</code>: this constant value means that the origin of allowable values is described within the archetype. This is coded to allow translation. The local archetype then only needs the set of codes and the local translation. The archetype may contain a translation table if required.</p>
</li>
<li>
<p>Terminology Id = <code>"[authority]"</code>. This might be <code>"openehr"</code>, <code>"centc251"</code>, <code>"hl7"</code>, etc;</p>
</li>
<li>
<p>The variant Terminology Id = <code>"[authority]:[Domain value set]"</code> could also be supported, although it should not generally be necessary, since all codes should be unique within a given issuing authority. Examples might be <code>"openehr:event math function"</code>, <code>"hl7:gender"</code>;</p>
</li>
<li>
<p>Terminology Id = <code>"SNOMED-CT"</code>, <code>"ICD10AM"</code>, etc. Idemtifiers of this kind must be unique values in an accepted set of terminologies from an authoritative source. These MUST be universally known. In openEHR, names from the US Natoinal Library of Medicine&#8217;s UMLS terminology name list are used. See <a href="#openehr_rm_support">[openehr_rm_support]</a>, <code>terminology</code> package for details.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_narrative_text"><a class="anchor" href="#_narrative_text"></a>Narrative Text</h5>
<div class="paragraph">
<p>Narrative text items are used in the EHR in a number of cases, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>values of coded attributes in the reference model;</p>
</li>
<li>
<p>recording of subjective or imprecise patient responses, particularly quantities or dates not deemed sufficiently precise to be represented using structured quantitative or date/time date types;</p>
</li>
<li>
<p>recording of narrative statements, e.g. visual observations;</p>
</li>
<li>
<p>recording of tracts of prose, e.g. overall findings and conclusions, prognoses;</p>
</li>
<li>
<p>recording of values that would normally be coded, but for which no code and/or no terminology service is available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While narrative text items themselves are not themselves coded, they may have code phrases associated
with them, as described below under Mappings, and may be mixed within a paragraph with
coded items.</p>
</div>
</div>
<div class="sect4">
<h5 id="_terminological_entities"><a class="anchor" href="#_terminological_entities"></a>Terminological Entities</h5>
<div class="paragraph">
<p>Textual entities available in a terminology service are used in the health record to enable processing,
from simple queries to decision support. Reasons for using terminology include the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To guarantee interoperability of meaning. For instance, if the term "cold" is recorded in plain text, it could be interpreted as "feeling cold", "C.O.L.D" (chronic obstructive lung disease), "rhinorrhoea", "coryza" or "U.R.T.I. (upper respiriatory tract infection), among others. If, however, it is coded from a terminology such as ICD10 or SNOMED-CT, any party reading the data (including software) knows the intention, since the meaning of the code in the terminology is unambiguous.</p>
</li>
<li>
<p>To standardise textual renderings of terms and avoid informal shorthand. For example, practitioners wanting to write "systolic blood pressure" write things like "systolic BP", "systolic bp", "sys. BP." and so on; use of coded terms ensures that such abbreviations are either avoided, or associated with an unambiguous meaning.</p>
</li>
<li>
<p>For unambiguous naming of problems, medications or diagnoses for support of knowledgebased tools such as prescribing packages and other decision support applications.</p>
</li>
<li>
<p>For standardised names of things in the record e.g. a heading of "Physical examination" or an entry such as "Differential diagnosis".</p>
</li>
<li>
<p>For finite sets of values ('value sets'), e.g. Blood Group = 'A|B|AB|O'.</p>
</li>
<li>
<p>For classifying other data for the purpose of statistical studies, e.g. by putting ICD disease group classifiers on actual disease names entered in health records.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A basic requirement for interoperability of text items, coded using terms (i.e. where the text is the
official rubric for the code), is that both the rubric and the code (or 'code-phrase') must be recorded,
to ensure the originally intended text is retained for receivers of EHR information who do not have
access to the terminologies used at the origin. However, where a terminology service is available, the
key can be used to unambiguously locate the string value of the term, and can also be used to find
translations in other languages. (Note that these comments do not apply to mappings, which are
described below).</p>
</div>
<div class="paragraph">
<p>In some terminologies, there are semantic networks of links emanating from most coded terms,
which classify them or relate them to other terms. Such links provide a means for decision support to
make inferences about specific things found in the record. For instance if the term "leukaemia" is
found, queries to the terminology service can be made in order to deduce that the patient has both a
"cancer" and a "disease of the immune system" (assuming leukaemia is classified under these more
general terms in the terminology).</p>
</div>
<div class="paragraph">
<p>This specification assumes the existence of a terminology service which is responsible for interrogating
actual terminologies and performing <em>validated coordination</em> of terms, i.e. creating combinations
deemed valid by the underlying source terminology, potentially without even assigning a new code to
the result. All validated coordination is carried out inside the terminology service, and any "term"
made available by the service is already 'coordinated'. The difference between 'pre-coordinated' and
'post-coordinated' terms is that the former have a single code, whereas the latter have a code phrase,
or expression that is interpretable by the terminology. For example, the coordination "foot, left" (a
shorthand way of writing the relationship "foot has-laterality left") could be created by the terminology
service from the source terms "foot", "left" and "has-laterality" from a terminology such as
SNOMED. Any such coordination must be valid within the source terminology, i.e. correspond to
valid relationships defined therein.</p>
</div>
<div class="paragraph">
<p>The class <code>DV_CODED_TEXT</code> described here captures the association of two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the code phrase of a code phrase provided by the terminology service, recorded in the <code><em>defining_code</em></code> attribute.</p>
</li>
<li>
<p>the text rubric of the code phrase, recorded in the <code><em>value</em></code> attribute (inherited from <code>DV_TEXT</code>);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The class <code>CODE_PHRASE</code>.<code><em>code_string</em></code> records a key, in the form of arguments to some retrieval function
in the terminology service interface.</p>
</div>
<div class="paragraph">
<p>The semantics attached to coordinations of terms may differ. Two categories of coordination
described in the literature are 'qualification' and 'modification'. A common definition of the first is
that "qualification narrows meaning" - i.e. creates a new term whose possible real world instances are
within the set denoted by the original root term. Modification on the other hand changes the meaning
of a root term. Various cases are described below under Meaning Modification. Both coordination
types are assumed to be managed by the terminology service.</p>
</div>
<div class="paragraph">
<p>Coded terms may also be mapped to terms from other terminologies, which may be intended as
equivalents, classifiers, or something in between. The section below on Mappings deals with these.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_2"><a class="anchor" href="#_design_2"></a>5.1.2. Design</h4>
<div class="paragraph">
<p>All atomic text items are either instances of the type <code>DV_TEXT</code> or of <code>DV_CODED_TEXT</code>. The former
allows the expression of text with optional formatting and hyperlinking. The latter additionally connects
the text value to a key in the terminology service, with the implication that the key refers to a
terminological entity lexically and semantically identical to the text value.</p>
</div>
<div class="paragraph">
<p>The model of <code>DV_CODED_TEXT</code> is designed to capture the actual coded term chosen by the user or
software at runtime; it is implicitly assumed that this includes whichever synonym (term of equivalent
meaning from the same terminology) was chosen, for terminologies supporting synonyms, and
any coordination of underlying distinct terms. A <code>DV_CODED_TEXT</code> instance can only be used if the
final textual value chosen by the user is lexically identical to the rubric returned by the terminology
service for the key; if the user makes even the slightest change, the identity of rubric / key is lost, and
a mapping (see <a href="#_mappings">Mappings</a> section) should be used instead.</p>
</div>
<div class="paragraph">
<p>The type <code>DV_TEXT</code> should be used wherever a coded or non-coded text item is allowed, while the
type <code>DV_CODED_TEXT</code> should be used wherever a text item must be coded.
The type <code>DV_PARAGRAPH</code> allows larger tracts of text to be built up from lists of <code>DV_TEXT</code> instances,
i.e. instances of <code>DV_TEXT</code> and <code>DV_CODED_TEXT</code>, as illustrated below.</p>
</div>
<div id="dv_paragraph" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/dv_paragraph.png" alt="dv paragraph" width="80%">
</div>
<div class="title">Figure 5. A DV_PARAGRAPH</div>
</div>
<div class="paragraph">
<p>The figure below illustrates the visual appearance of a typical <code>DV_PARAGRAPH</code>.</p>
</div>
<div id="dv_paragraph_visual" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/dv_paragraph_visual.png" alt="dv paragraph visual" width="60%">
</div>
<div class="title">Figure 6. DV_PARAGRAPH visual appearance</div>
</div>
</div>
<div class="sect3">
<h4 id="_qualification"><a class="anchor" href="#_qualification"></a>5.1.3. Qualification</h4>
<div class="paragraph">
<p>Qualification is the process of making a term more specific through the post-coordination of additional
terms. It occurs when a terminology defines relationships between a primary term and other
terms that qualify the primary. For example a coordination using the term "bronchitis" which creates
a qualified term might be "acute bronchitis"; all real world instances of the latter are also instances of
the former.</p>
</div>
</div>
<div class="sect3">
<h4 id="_meaning_modification"><a class="anchor" href="#_meaning_modification"></a>5.1.4. Meaning Modification</h4>
<div class="paragraph">
<p>Terms that change the meaning of other terms are often known as "modifiers". The difference
between modification and qualification is that modifiers change the meaning so that the modifed term
as a whole does <em>not</em> refer to instances of the unmodified term. We describe below the particular types
of modifiers and how they are represented using the text data types.</p>
</div>
<div class="sect4">
<h5 id="_mode_changing_terms"><a class="anchor" href="#_mode_changing_terms"></a>Mode-changing Terms</h5>
<div class="paragraph">
<p>One class of modifers is exemplified by the addition of words like "risk of", "fear of", "history of"
and so on. These are sometimes called <em>mode-changing</em> terms, since they change the "mode" of the
root term from the present to the past ("history of"), a potential future ("risk of") or some other alternate
reality. Terms which are modified in this way should never be matched in queries searching for
the root term; for example, a query for "coronary diease" (of the patient) should not match "family
history of coronary disease".</p>
</div>
</div>
<div class="sect4">
<h5 id="_context_sensitivity"><a class="anchor" href="#_context_sensitivity"></a>Context Sensitivity</h5>
<div class="paragraph">
<p>There are many terms whose meaning is changed by the context in which they are stated, such as
within a certain kind of note or test result. Consider the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a blood sugar level after a 75gm oral loading has a different meaning than a fasting blood sugar;</p>
</li>
<li>
<p>a systolic blood pressure in the pulmonary artery has a different meaning than a systemic arterial blood pressure;</p>
</li>
<li>
<p>"total hip replacement" in the context of a "planned procedure";</p>
</li>
<li>
<p>"meningitis" in the context of a "differential diagnosis".</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_negation"><a class="anchor" href="#_negation"></a>Negation</h5>
<div class="paragraph">
<p>Negation is a special kind of mode change and has been a serious design challenge in the past,
because modifiers like "not" or "no" only make sense when attached to some terms, and create nonsensical
values or ambiguities by arbitrarily association with other terms.</p>
</div>
</div>
<div class="sect4">
<h5 id="_representation_of_meaning_modifying_terms"><a class="anchor" href="#_representation_of_meaning_modifying_terms"></a>Representation of Meaning-Modifying Terms</h5>
<div class="paragraph">
<p>Rather than provide explicit features for representing modifier terms within <code>DV_CODED_TEXT</code>, the
general principle underlying representation of all post-coordinations other than qualifications, is that
a higher-level, archetyped structure such as an <code>ENTRY</code> (defined in the EHR RM), is a <em>minimal indivisible
unit of information</em>. Such higher-level entities can have internal structure, and it is possible (and
desirable) to achieve the effect of combinations of terms through this structure. In the case of <code>ENTRY</code>,
it will be via structuring of <code>CLUSTER</code>/<code>ELEMENT</code> objects. The general rule is: to obtain the full meaning
of any terms found in the record, all of the node names in any <code>ENTRY</code> (coded or not) must be considered
from the root to the relevant leaf. Conversely, the "final" meaning of any term in the record
cannot be known in isolation from the rest of the terms in the structure.</p>
</div>
<div class="paragraph">
<p>Accordingly, the concept "family history of coronary disease" is represented as an <code>ENTRY</code> whose root
is named (for example) "subject family history", and which includes further structure, which may be
in greater of lesser detail; the coded term "coronary disease" would appear somewhere in this structure.
The actual structure is completely defined by appropriate archetypes. Contrary to some perceptions,
there is no general way to represent concepts such as "family history of coronary disease",
since it will vary depending on how much detail is recorded. Where some GPs routinely record just
the simplest form, others may record the details of which family members had heart problems and
exactly what they were.</p>
</div>
<div class="paragraph">
<p>The same approach is used for context-dependent terms. Archetypes defining contexts such as
"planned procedures" or "differential diagnosis" will use these terms as their root nodes; as a result,
the meaning of any term appearing below the root can only be understood by including the root. Once
again, the exact structures are completely dependent upon archetyping, and may be simple or quite
sophisticated.</p>
</div>
<div class="paragraph">
<p>Negations are more complex than might first be apparent and are best handled by good archetype
design. Terminologies might provide a term such as "No known allergies" which is helpful. But if
someone has an allergy of some sort, the medicolegal requirement might be to record that the person
has no known allergies to penicillin or another class of medication that is being prescribed. The oftenproposed
approach of using a generic negation 'modifier' to deal with such issues results in further
problems. Consider the use of negation with liver - "no liver", "no palpable liver", "no liver disease",
"no history of liver disease", "no liver function", "no liver function tests". The meaning of negated
terms may be non-sensical and difficult to interpret.</p>
</div>
<div class="paragraph">
<p>A basic principle of dealing with negatives is to realise that most naïve suggested use cases are quite
ambiguous as stated. Does "no allergies" mean "no reported episode of allergy", "no allergic reactions
ever", "no known allergies to medication" or something else? Does it mean that these statements
are taken as given by the patient, or determined by tests? Like all medical phenomena, allergies
must be described in some detail for the EHR to be of any real use. Almost inevitably, this precludes
the use of negated terms. Since the actual information structure will be determined in advance by
archetype designers, clinicians will almost never be in the situation of having to negate a term. However,
if the need does arise, it should be dealt with by a negative or quantitative answer, i.e. a value
rather than a name. For example, in any <code>ENTRY</code> describing current problems, the clinician may record
the name/value pair "allergies: NONE". Here, "allergies" will be a <code>DV_CODED_TEXT</code>, and "NONE"
will be either a <code>DV_CODED_TEXT</code> or a <code>DV_TEXT</code>; the two will be associated by a containing object,
such as an instance of the <code>ELEMENT</code> class from the EHR RM. There is no explicit model of negation
in openEHR.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mappings"><a class="anchor" href="#_mappings"></a>5.1.5. Mappings</h4>
<div class="paragraph">
<p>In a number of circumstances, both plain text and coded text items are mapped to terms from other
terminologies. In theory, this should never occur, since it means that relationships between terms
which should only be knowable in the knowledge base (in the form of the terminology service, or
something else) are being created and transmitted as part of EHR information, potentially invalidating
or overriding the knowledge base. Where mappings are required, the proper approach is to create thesauri
within the knowledge environment, and map through them. Unfortunately, in some cases, activities
in the real world do not respect the information/knowledge boundary, hence the model described
here includes an explicit mapping concept, which itself includes a "purpose" and a "match" indicator.
Matching corresponds to the categories described below.</p>
</div>
<div class="sect4">
<h5 id="_classification_broader_terms"><a class="anchor" href="#_classification_broader_terms"></a>Classification (Broader Terms)</h5>
<div class="paragraph">
<p>Any text item, whether coded or not, may be classified with a coded term, for research, reporting and
decision support purposes. For example, a GP working in tropical Australia may wish to write "Ross
River infection", and be working with ICD9, which does not contain this term (although ICD9-CM
does). He or she will use a plain text item, but will still be able to map it to an ICD9 classifier, such as
the code for "arbovirus infection NOS". The same approach can be used for adding a classifying term
to a coded text item. The utility of classifier terms is various: they allow decision support to make
more powerful inferences; in situations where the available terminologies do not provide the classification
inbuilt, and where it is known that not all users of EHR data will have terminologies available.
In data terms, classification mapping can be visualised as illustrated below.</p>
</div>
<div id="coded_text_mappings" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/coded_text_mappings.png" alt="coded text mappings" width="70%">
</div>
<div class="title">Figure 7. Plain Text and Coded Text with Classifier(s)</div>
</div>
<div class="paragraph">
<p>Classifying mappings are represented by adding a term to the mappings list of the original term. Each
mapping is explicitly represented with an instance of <code>TERM_MAPPING</code>, which indicates both the term
being associated with the original text item, and a value of '&gt;' for the match attribute, which indicates
that the mapping is "broader". The possible values of the match attribute are '&gt;' (broader), '&lt;' (narrower),
and '=' (equivalent); they are taken from the ISO standards <a href="#ISO_2788">[ISO_2788]</a>) and <a href="#ISO_5964">[ISO_5964]</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_equivalent_synonymous_terms"><a class="anchor" href="#_equivalent_synonymous_terms"></a>Equivalent / Synonymous Terms</h5>
<div class="paragraph">
<p>Data from pathology laboratories has often been coded using a terminology local to the laboratory,
due to lack of or economic unfeasibility of using existing widespread terminologies for the job. However,
some laboratories also supply a nearest equivalent code from a well-known terminology such as
LOINC, to enable the receiver of the data to process it in a more standard fashion. Here, "equivalence"
is taken to mean a term of the same meaning but from a different vocabulary.</p>
</div>
<div class="paragraph">
<p>Another instance where equivalent terms might be supplied is to effect the translation of terms across
specialist vocabularies such as nursing vocabularies when sharing EHRs across jurisdictions.</p>
</div>
<div class="paragraph">
<p>In theory, the cleanest way for senders and receivers of data coded with both a local and a more standard
equivalent to deal with the mapping problem is for the originator of the local terminology to provide
a complete thesaurus of translations into one or more recognised terminologies. However, in
practice, laboratories using the HL7 v2.x messaging standard usually encode a primary term and
equivalents with the HL7 CE data type, meaning that equivalents are included only with the term they
are used with. A similar pragmatic approach to mapping equivalent terms in the EHR is likely to be
used with the data types described here, and can be effected with the same mapping approach as for
classification.</p>
</div>
<div class="paragraph">
<p>A further situation in which text values - this time plain text - is mapped to equivalent terms is when
natural language processing is used to generate coded terms for existing free-text prose. The aim of
such processing is to detect word phrases and associate them with a coded term of the same meaning,
without obliterating the original text. In terms of the model described here, a <code>CODE_PHRASE</code> is associated
with a <code>DV_TEXT</code> instance via the mappings attribute.</p>
</div>
<div class="paragraph">
<p>In all cases with equivalents, the value of the match attribute is '=', indicating that the mapping is a
synonym.</p>
</div>
</div>
<div class="sect4">
<h5 id="_more_specific_mappings_narrower_terms"><a class="anchor" href="#_more_specific_mappings_narrower_terms"></a>More Specific Mappings (Narrower Terms)</h5>
<div class="paragraph">
<p>Occasionally, there is a need to create a mapping to a term of narrower meaning than the original text
item. Circumstances in which this occurs include when a clinician wants to record a syndrome such as
"croup" or "influenza", but the terminology does not contain these general terms, although it does
contain more specific terms, e.g. "viral laryngo-tracheitis" or "influenza type A". Clearly the clinician
should be allowed to record what he/she wants (as plain text if necessary), but it should also be possible
to add a mapping to the more precise term. For mappings to narrower terms, the value of the
match attribute is '&lt;'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_the_unified_medical_language_system_umls"><a class="anchor" href="#_the_unified_medical_language_system_umls"></a>The Unified Medical Language System (UMLS)</h5>
<div class="paragraph">
<p>It has been argued in GEHR <a href="#GeHR_Aus_req">[GeHR_Aus_req]</a> that UMLS reference terms should also be supplied with occurrences
of coded terms, in the form of the UMLS concept unique identifier, or "CUI". UMLS is a way
of encoding terms developed at the National Library of Medicine in the United States, and consists of
a meta-thesaurus, in which terms from any extant term set (such as ICD, SNOMED, READ) can be
cross-referenced. UMLS CUIs could turn out to be extremely useful for decision support and reporting.</p>
</div>
<div class="paragraph">
<p>The proper use of UMLS is that terms from particular terminologies are passed to a UMLS interface
and a CUI + rubric received in response. However, the mapping approach described above could also
be used to map UMLS CUIs to existing text or terms in an EHR; in this case, a <code>DV_CODED_TEXT</code> is
constructed for each UMLS "term", where the code is the CUI and the rubric is the text rendering of
the CUI (guaranteed unique in UMLS). The same approach can be used for any other thesaurus
which becomes available in the future.</p>
</div>
</div>
<div class="sect4">
<h5 id="_legacy_mapping_scenarios"><a class="anchor" href="#_legacy_mapping_scenarios"></a>Legacy Mapping Scenarios</h5>
<div class="paragraph">
<p>In cases where legacy data has to be converted to openEHR-compliant data, and only codes are available,
e.g. ICD or ICPC codes, the following approach is recommended:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a new <code>DV_TEXT</code> whose value is "(not available)"</p>
</li>
<li>
<p>add a mapping to the <code>DV_TEXT</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code><em>purpose</em></code> = <code>"legacy conversion"</code></p>
</li>
<li>
<p><code><em>match</em></code> = <code>"="</code></p>
</li>
<li>
<p><code><em>target</em></code> = <code>CODE_PHRASE</code> object whose code_string and terminology_id are set to correspond to the available code in the legacy data.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This expresses the reality that no text was ever recorded in the legacy system; rather a code was
recorded directly in the data field. In the converted data, this code is more correctly considered a
mapping.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_language_translations"><a class="anchor" href="#_language_translations"></a>5.1.6. Language Translations</h4>
<div class="paragraph">
<p>In most cases the natural language of a text object is known from the enclosing Entry (i.e. Observation)
or other enclosing context. Where it is different (e.g. a german sentence within an English language
diagnosis), or there is no enclosing context, the <code>DV_TEXT</code>.<code><em>language</em></code> attribute can be set to
indicate the language of the text item.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>5.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_text_class"><a class="anchor" href="#_dv_text_class"></a>5.2.1. DV_TEXT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_TEXT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A text item, which may contain any amount of legal characters arranged as e.g. words, sentences etc (i.e. one DV_TEXT may be more than one word). Visual formatting and hyperlinks may be included.</p>
</div>
<div class="paragraph">
<p>A DV_TEXT can be  coded  by adding mappings to it.</p>
</div>
<div class="paragraph">
<p>Fragments of text, whether coded or not are used on their own as values, or to make up larger tracts of text which may be marked up in some way, eventually going to make up paragraphs.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Displayable rendition of the item, regardless of its underlying structure. For DV_CODED_TEXT, this is the rubric of the complete term as provided by the terminology service. No carriage returns, line feeds, or other non-printing characters permitted.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hyperlink</strong>: <code>DV_URI</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional link sitting behind a section of plain text or coded term item.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formatting</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A format string of the form  name:value; name:value&#8230;&#8203; , e.g. "font-weight : bold; font-family : Arial; font-size : 12pt;".</p>
</div>
<div class="paragraph">
<p>Values taken from W3C CSS2 properties lists  back-ground  and  font .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>mappings</strong>: <code>List&lt;TERM_MAPPING&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Terms from other terminologies most closely matching this term, typically used where the originator (e.g. pathology lab) of information uses a local terminology but also supplies one or more equivalents from well known terminologies (e.g. LOINC).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional indicator of the localised language in which the value is written. Coded from openEHR Code Set  languages . Only used when either the text object is in a different language from the enclosing ENTRY, or else the text object is being used outside of an ENTRY or other enclosing structure which indicates the language.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>encoding</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of character encoding scheme in which this value is encoded. Coded from openEHR Code Set  character sets . Unicode is the default assumption in openEHR, with UTF-8 being the assumed encoding. This attribute allows for variations from these assumptions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Valid_value</em></strong>: not value.is_empty and then not (value.has(CR) or value.has(LF))</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Language_valid</em></strong>: language /= Void implies code_set (Code_set_id_languages).has_code (language)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Encoding_valid</em></strong>: encoding /= Void implies code_set (Code_set_id_character_sets).has_code (encoding)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Mappings_valid</em></strong>: mappings /= void implies not mappings.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Formatting_valid</em></strong>: formatting /= void implies not formatting.is_empty</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_term_mapping_class"><a class="anchor" href="#_term_mapping_class"></a>5.2.2. TERM_MAPPING Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TERM_MAPPING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Represents a coded term mapped to a DV_TEXT, and the relative match of the target term with respect to the mapped item. Plain or coded text items may appear in the EHR for which one or mappings in alternative terminologies are required. Mappings are only used to enable computer processing, so they can only be instances of DV_CODED_TEXT.
Used for adding classification terms (e.g. adding ICD classifiers to SNOMED descriptive terms), or mapping into equivalents in other terminologies (e.g. across nursing vocabularies).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>match</strong>: <code>char</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The relative match of the target term with respect to the mapped text item. Result meanings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>'&gt;': the mapping is to a broader term e.g. orginal text =  arbovirus infection , target =  viral infection</p>
</li>
<li>
<p>'=': the mapping is to a (supposedly) equivalent to the original item</p>
</li>
<li>
<p>'&lt;': the mapping is to a narrower term. e.g. original text =  diabetes , mapping =  diabetes mellitus .</p>
</li>
<li>
<p>'?': the kind of mapping is unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first three values are taken from the ISO standards 2788 ( Guide to Establishment and development of monolingual thesauri ) and 5964 ( Guide to Establishment and development of multilingual thesauri ).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>purpose</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Purpose of the mapping e.g.  automated data mining ,  billing ,  interoperability</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The target term of the mapping.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>narrower</strong>: <code>Boolean</code><br>
<strong><em>Post</em></strong>: match = ‘&lt;’ implies Result</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The mapping is to a narrower term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>broader</strong>: <code>Boolean</code><br>
<strong><em>Post</em></strong>: match = ‘&gt;’ implies Result</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The mapping is to a broader term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>equivalent</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The mapping is to an equivalent term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>unknown</strong>: <code>Boolean</code><br>
<strong><em>Post</em></strong>: match = ‘?’ implies Result</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The kind of mapping is unknown.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_valid_match_code</strong> (c: <code>char</code>): <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result := c = ‘&gt;’ or c = ‘=’ or c = ‘&lt;’ or c = ‘?’</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if match valid.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Purpose_valid</em></strong>: purpose /= Void implies terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_term_mapping_purpose, purpose.defining_code)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Match_valid</em></strong>: is_valid_match_code (match)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_code_phrase_class"><a class="anchor" href="#_code_phrase_class"></a>5.2.3. CODE_PHRASE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>CODE_PHRASE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A fully coordinated (i.e. all  coordination  has been performed) term from a terminology service (as distinct from a particular terminology).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_id</strong>: <code>TERMINOLOGY_ID</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Identifier of the distinct terminology from which the code_string (or its elements) was extracted.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>code_string</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The key used by the terminology service to identify a concept or coordination of concepts.  This string is most likely parsable inside the terminology service, but nothing can be assumed about its syntax outside that context.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Code_string_valid</em></strong>: not code_string.is_empty</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_coded_text_class"><a class="anchor" href="#_dv_coded_text_class"></a>5.2.4. DV_CODED_TEXT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_CODED_TEXT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A text item whose value must be the rubric from a controlled terminology, the key (i.e. the  code') of which is the defining_code attribute. In other words: a DV_CODED_TEXT is a combination of a CODE_PHRASE (effectively a code) and the rubric of that term, from a terminology service, in the language in which the data was authored.</p>
</div>
<div class="paragraph">
<p>Since DV_CODED_TEXT is a subtype of DV_TEXT, it can be used in place of it, effectively allowing the type DV_TEXT to mean  a text item, which may optionally be coded.</p>
</div>
<div class="paragraph">
<p>Misuse: If the intention is to represent a term code attached in some way to a fragment of plain text, DV_CODED_TEXT should not be used; instead use a DV_TEXT and a TERM_MAPPING to a CODE_PHRASE.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_TEXT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>defining_code</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The term which the  value' attribute is the textual rendition (i.e. rubric) of.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_paragraph_class"><a class="anchor" href="#_dv_paragraph_class"></a>5.2.5. DV_PARAGRAPH Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PARAGRAPH</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A logical composite text value consisting of a series of DV_TEXTs, i.e. plain text (optionally coded) potentially with simple formatting, to form a larger tract of prose, which may be interpreted for display purposes as a paragraph.</p>
</div>
<div class="paragraph">
<p>DV_PARAGRAPH is the standard way for constructing longer text items in summaries, reports and so on.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>items</strong>: <code>List&lt;DV_TEXT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Items making up the paragraph, each of which is a text item (which may have its own formatting, and/or have hyperlinks).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Items_valid</em></strong>: not items.is_empty</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quantity_package"><a class="anchor" href="#_quantity_package"></a>6. Quantity Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.quantity</code> package is illustrated below. Dates and Times are found in the
next section.</p>
</div>
<div id="rm_data_types_quantity" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types.quantity.svg" alt="RM data types.quantity">
</div>
<div class="title">Figure 8. rm.data_types.quantity package</div>
</div>
<div class="sect3">
<h4 id="_requirements_3"><a class="anchor" href="#_requirements_3"></a>6.1.1. Requirements</h4>
<div class="sect4">
<h5 id="_ordinal_values"><a class="anchor" href="#_ordinal_values"></a>Ordinal Values</h5>
<div class="paragraph">
<p>Medicine is one domain in which symbols representing relative magnitudes are commonly used,
without exact values being known. The main purpose is usually to classify patients into groups for
which different decisions might be made. Thus, while approximate ranges (technically speaking -
"fuzzy intervals") might be stated (such as for a urinalysis), concrete values are not of interest, only
categories are. Take for example the characterisation of pain as being "mild", "medium", "severe", or
the reflex response to tendon percussion as "-", "+/-", "+", "++", "+++", "++++". There may be no
way to scientifically precisely quantify such values because they reflect a subjective experience of the
patient or informal judgement by clinician. However, they are understood as being ordered, e.g. "++"
is 'greater than' "+".</p>
</div>
<div class="paragraph">
<p>Similarly, even though the symbolic values for haemolysed blood in a urinalysis have approximate
ranges stated for them, as shown below, these 'values' are not usable in the same way as true quantities.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"neg", "trace" (10 cells/&#956;l)</p>
</li>
<li>
<p>"small" (&lt;25 cells/&#956;l)</p>
</li>
<li>
<p>"moderate" (&lt;80 cells/&#956;l)</p>
</li>
<li>
<p>"large" (&gt;200 cells/&#956;l)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A second requirement for ordinal values is that in many cases there is a need to associate integer values
with the symbols, in order to facilitate ordered comparison, and also to enable longitudinal comparison
across results of the same kind (e.g. pain, protein). Integer values may be negative, 0 and
positive, typically to allow the 0 value to correspond to a neutral value in a range.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
an argument sometimes put forward for recording all ordinals in a more precise way is that
comparisons might want to be made between the values quoted by two laboratories for the same symbol
(e.g. "moderate"). There are a number of counter-arguments. Firstly, such comparisons are a poor
attempt at normalisation, an activity which is the business of pathologists, not EHR users. Secondly,
the symbolic values are often arrived at by the tester making a judgement of colour on a strip, which
while an adequate (and cost-effective) approach for classifying, is not a valid means of quantifying a
value. Lastly, in most cases, if a quantified point value or range is desired, or available, then it will be
used - meaning that the appropriate quantitative data type can be used, rather than an the ordinal
type.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_countable_things"><a class="anchor" href="#_countable_things"></a>Countable Things</h5>
<div class="paragraph">
<p>An common kind of data value in medicine is the dimensionless countable quantity, e.g. "number of
doses: 2", "number of previous pregnancies: 1", "number of tablets: 3". Values of this type are always
integral. Countable values need to be convertible to real numbers for statistical purposes, for example
for a study of average number of pregnancies per couple.</p>
</div>
<div class="paragraph">
<p>Some countable entities such as tablets are divisible into major fractions, typically halves and occasionally
quarters.</p>
</div>
</div>
<div class="sect4">
<h5 id="_dimensioned_quantities"><a class="anchor" href="#_dimensioned_quantities"></a>Dimensioned Quantities</h5>
<div class="paragraph">
<p>The most common kind of quantity is a measured, dimensioned quantity. Anything which is measurable
(rather than countable) involves a number of data aspects, namely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a magnitude whose value is a real number;</p>
</li>
<li>
<p>the physical property being measured, with the appropriate units;</p>
</li>
<li>
<p>a concept of precision, i.e. to what number of decimal places the value is recorded;</p>
</li>
<li>
<p>a concept of accuracy, i.e. the known or assumed error in the measurement due to instrumentation or human judgement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples of dimensioned quantities include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>systolic BP: 110 mmHg</p>
</li>
<li>
<p>height: 178 cm</p>
</li>
<li>
<p>rate of asthma attacks: 7 /week</p>
</li>
<li>
<p>weight loss: 2.5 kg</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ratios_and_proportions"><a class="anchor" href="#_ratios_and_proportions"></a>Ratios and Proportions</h5>
<div class="paragraph">
<p>A common quantitative type in science and medicine is the proportion, or ratio, which is used in situations like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1:128 (a titer);</p>
</li>
<li>
<p>Na:K concentration ratio (unitary denominator);</p>
</li>
<li>
<p>albumin:creatinine ratio;</p>
</li>
<li>
<p>% e.g. red cell distribution width (RDW) which is the width of a distribution of RBC widths.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general ratios have real number values, even if many examples appear to be integer ratios. Proportions
with unitary denominator and % (denominator = 100) are common.</p>
</div>
</div>
<div class="sect4">
<h5 id="_formulations"><a class="anchor" href="#_formulations"></a>Formulations</h5>
<div class="paragraph">
<p>A concept superficially similar to proportions and ratios is formulations of materials, such as a solid
in a liquid e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>250 mg / 500 ml (solute/solvent)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although a single solute/single solvent formulation appears to have the same form as a ratio, the general
form is for any number of substances to be mixed together, usually according to a particular procedure.
Formulations are therefore not candidates for direct modelling as fine-grained quantities, but
instead are constructed by archetyping a higher-level structure, each leaf element of which contains
the required kind of Quantity.</p>
</div>
</div>
<div class="sect4">
<h5 id="_quantity_ranges"><a class="anchor" href="#_quantity_ranges"></a>Quantity Ranges</h5>
<div class="paragraph">
<p>Quantity ranges are ubiquitous in science and medicine, and may be defined for any kind of measured
phenomenon. Examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>healthy weight range, e.g. 48kg - 60kg</p>
</li>
<li>
<p>normal range for urinalysis in pregnancy - protein, e.g. "nil" - "trace"</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_reference_ranges"><a class="anchor" href="#_reference_ranges"></a>Reference Ranges</h5>
<div class="paragraph">
<p>A reference range is a quantity range attached to a measured value, and is common for laboratory
result values. The typical form of a reference range found in a pathology result indicates what is considered
the 'normal' range for a measured value. Examples of reference ranges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>normal range for serum Na is 135 - 145 mmol/L.</p>
</li>
<li>
<p>desirable total cholesterol: &lt; 5.5 mmol/L (strictly this probably should be 2.0 - 5.5 mmol/L,
but is not usually quoted this way as low cholesterol is not considered a problem.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ranges can also be quoted for drug administrations, in which case they are usually thought of as the
'therapeutic' range. For example, the anticonvulsant drug Carbamazepine has a therapeutic range of
20 - 40 &#956;Mol/L. In some cases, there are multiple ranges associated with a drug, for example, Salicylate
has a therapeutic range of 1.0 - 2.5 mmol/L and a toxic range &gt; 3.6 mmol/L</p>
</div>
<div class="paragraph">
<p>Various examples occur in which multiple ranges may be stated, including the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The administration recomendations for drugs which depend on the particular patient state. For example, the therapeutic range of Cyclosporin (an immunosuppresant) is a function of time post-transplant for the affected organ, e.g. kidney: &lt; 6 months: 250 - 350 &#956;g/L, &gt; 6 months: 100 - 200 &#956;g/L.</p>
</li>
<li>
<p>Normal ranges for blood IgG, IgA, IgM which vary significantly with the age in months from birth.</p>
</li>
<li>
<p>Progesterone and pituitary hormones have ranges which are different for different phases of
the menstrual cycle and for menopause. This may result in 4 or 5 ranges given for one result.
Only one will apply to any particular patient - but the exact phase of the cycle may be
unknown - so the ranges may need to be associated with the value with no 'normal' range.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where there are multiple ranges, the important question is: <em>which range information is relevant to the
actual data being recorded for the patient?</em> In theory, only the range corresponding to the particular
patient situation should be used, i.e. the range which applies after taking into account sex, age, smoking
status, "professional athlete", organ transplanted, etc. In most cases, this is a single "normal"
range, or a pair of ranges, typically "therapeutic" and "critical". However, practical factors complicate
things. Firstly, data is sometimes supplied from pathology labs along with some or all of the
applicable reference ranges, even though only some could possibly apply. This is particularly the case
if the laboratory has no other data on the patient, and cannot evaluate which range applies. The
requirement for faithfulness of recording might be extended to reference data supplied by laboratories,
regardless of how irrelevant or arbitrarily chosen the reference data is, meaning that such data
has to be stored in the record anyway. Secondly, there may be circumstances in which physicians
want a number of reference ranges, even while knowing that only one range is applicable to the
datum. Ranges above and below the relevant one might be useful to a physician wishing to determine
how far out of range the datum is.</p>
</div>
</div>
<div class="sect4">
<h5 id="_normal_range_and_status_in_laboratory_data"><a class="anchor" href="#_normal_range_and_status_in_laboratory_data"></a>Normal Range and Status in Laboratory data</h5>
<div class="paragraph">
<p>It is quite common for laboratories to include a normal range with each measured value, and/or a normal
'status', which indicates where the value lies with respect to the normal range. The latter will
commonly take the form of markers like "HHH" (critically high), HH (abnormally high), H (borderline
high), L, LL, LLL in HL7v2 messaging, although other schemes are undoubtedly used.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_3"><a class="anchor" href="#_design_3"></a>6.1.2. Design</h4>
<div class="sect4">
<h5 id="_basic_semantics"><a class="anchor" href="#_basic_semantics"></a>Basic Semantics</h5>
<div class="paragraph">
<p>In order to make sense of the requirements in a systematic way, a proper typology for quantities is
needed. The most basic characteristic of all values typically called 'quantities' is that they are
ordered, meaning that the operator "&lt;" (less-than) is defined between any two values in the domain.
An ancestor class for all quantities called <code>DV_ORDERED</code> is accordingly defined. This type is subtyped
into ordinals and true quantities, represented by the classes <code>DV_ORDINAL</code> and <code>DV_QUANTIFIED</code>
respectively. <code>DV_ORDINAL</code> represents data values whose exact numeric values are not known, and
which use symbolic renderings instead, such as "+", "++", "+++", or "mild", "medium", "severe".
Each symbol can be assigned any integer value, providing a basis for computable comparison. In contrast,
instances of <code>DV_QUANTIFIED</code> and all its subtypes have precise numeric magnitudes.</p>
</div>
<div class="paragraph">
<p><code>DV_QUANTIFIED</code> itself introduces the concepts of magnitude and magnitude_status. The magnitude
attribute is guaranteed to be available on any <code>DV_QUANTIFIED</code>, carrying the effective value, regardless
of the particular subtype. The optional magnitude_status attribute can be used to provide a nonquantified
indication of accuracy, and takes the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"=" : magnitude is a point value</p>
</li>
<li>
<p>"&lt;" : value is &lt; magnitude</p>
</li>
<li>
<p>"&gt;" : value is &gt; magnitude</p>
</li>
<li>
<p>"&lt;=" : value is &lt;= magnitude</p>
</li>
<li>
<p>"&gt;=" : value is &gt;= magnitude</p>
</li>
<li>
<p>"~" : value is approximately magnitude</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, meaning is "=".</p>
</div>
<div class="paragraph">
<p>Logically, an accuracy attribute should also be included in <code>DV_QUANTIFIED</code>, but as its modelling is
different in the subtypes in a way that does not easily lend itself to a common ancestor, it is only
included in the subtypes.</p>
</div>
<div class="paragraph">
<p>The <code>DV_QUANTIFIED</code> class has two subtypes: <code>DV_AMOUNT</code> and <code>DV_ABSOLUTE_QUANTITY</code>. The
former corresponds to relative 'amounts' of something, either a physical property(such as mass) or
items (e.g. cigarettes). Mathematically, the '+' and '-' operators (as well as '*' and '/') are defined in
the same way as for the real numbers (or any other mathematical 'field'), with the semantics that adding
two relative quantities measuring the same thing (i.e. with the same units) produces another relative
quantity of the same kind; while the semantics of subtraction are that one relative quantity
subtracted from another generates a third.</p>
</div>
<div class="paragraph">
<p>The second subtype of <code>DV_QUANTIFIED</code>, <code>DV_ABSOLUTE_QUANTITY</code>, models quantities whose values
are absolute along a line having a defined origin. The main example of absolute quantities are the
temporal concepts date, time and date/time. These are distinguished from relative quantities in that
the normal addition and subtraction operations don&#8217;t apply. Instead, the semantics of such operators
are based on the idea of the difference between absolute values being a relative amount. For example,
two dates can be subtracted, but the result is a duration, not another date. For this reason, the operations
<code><em>add</em></code>, <code><em>subtract</em></code> and <code><em>diff</em></code> are defined rather than '+' or '-'. Date/time types, as well as the relative
concept duration, are defined in the <a href="#_date_time_package">Date Time Package</a>.</p>
</div>
<div class="paragraph">
<p>Subtypes of <code>DV_AMOUNT</code> are <code>DV_PROPORTION</code>, <code>DV_QUANTITY</code>, <code>DV_COUNT</code>, and <code>DV_DURATION</code> (see
date_time package). The type <code>DV_COUNT</code> has an integer magnitude and is used to record naturally
countable things such as number of previous pregnancies, number of steps taken by a recovering
stroke victim and so on. There are no units or precision in a <code>DV_COUNT</code>. Countable quantities can be
used to create instances of <code>DV_QUANTITY</code>, such as during a statistical study which average tobacco
consumption over a time period. Such a computation might cause the creation of <code>DV_QUANTITY</code>
objects representing values like {magnitude = 5.85, units = '/ week'}</p>
</div>
<div class="paragraph">
<p><code>DV_QUANTITY</code> is used to represent amounts of measurable things, and has a real number magnitude,
precision, units and accuracy. The units attribute contains the scientific unit in a parsable form
defined by the Unified Code for Units of Measure <a href="#UCUM">[UCUM]</a>. A valid units string always implies a
measured property, such as "force" or "pressure". The property of a Quantity can conveniently constrained in archetypes, e.g. to "pressure", which would allow any pressure unit. Unit strings can be
compared to determine if they measure the same property (e.g. "bar" and "kPa" are both units corresponding
to the property "pressure"), which enables the is_strictly_comparable_to function defined
on <code>DV_ORDERED</code> to be properly specified on <code>DV_QUANTITY</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
while these semantics will allow comparison of e.g. two pressures
recorded in mbar and mmHg, or even two accelerations whose units are "m.s^-2" and "m/s^2", they
provide no guarantee that this is a sensible thing to do in terms of domain semantics: comparing a
blood pressure to an atmospheric pressure for example may or may not make any sense. It is not
within the scope of the quantity package to express such semantics: this is up to application software
which uses Quantities found in specific places in the data.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_accuracy_and_uncertainty"><a class="anchor" href="#_accuracy_and_uncertainty"></a>Accuracy and Uncertainty</h5>
<div class="paragraph">
<p>Theoretically it might be argued that 'accuracy' should not be included in a model for quantified values,
because it is an artifact of a measuring process and/or device, not of a quantity itself. For example,
a weight of "82 kg &#177;5%" can be represented in two parts. The "82 kg" is represented as a <code>DV_QUANTITY</code>, while the "&#177;5%" could be included in the protocol description of the weighing
instrument, since this is where the error comes from. For practical purposes however, (in)accuracy in
a measured quantity corresponds to a range of possible values. In realistic computing in health, it is
quite likely that the accuracy will be required in computations on quantities, especially for statistical
population queries in which measurement error must be disambiguated from true correlation.</p>
</div>
<div class="paragraph">
<p>Accuracy is therefore introduced as the abstract feature accuracy of the <code>DV_QUANTIFIED</code> class. It is
defined concretely in the two descendants, <code>DV_AMOUNT</code>, where it is of type Real, and
<code>DV_ABSOLUTE_QUANTITY</code>, where it is of a differential type defined by subtypes. A value of 0 in
either case indicates 100% accuracy, i.e. no error in measurement. Where accuracy is not recorded in
a quantity, it is represented by a special value. In <code>DV_AMOUNT</code>, a value of -1 for the accuracy attribute
is used for this purpose, and the constant unknown_accuracy_value = -1 is provided within the class
to give a symbolic name for the special value. In the <code>DV_ABSOLUTE_QUANTITY</code> class,
<code><em>accuracy_unknown</em></code> is represented by a Void (i.e. null) value for the accuracy attribute. An abstract
Boolean feature <code><em>accuracy_unknown</em></code> is defined in the parent class <code>DV_QUANTIFIED</code> to provide a logical
test of accuracy being absent, and is implemented in the respective descendants by concrete functions
that check for the special values.</p>
</div>
<div class="paragraph">
<p>In addition, the class <code>DV_AMOUNT</code>, provides a feature accuracy_is_percent: Boolean to indicate if
accuracy value is to be understood as a percentage, or an absolute value.</p>
</div>
<div class="paragraph">
<p>When two compatible quantities are added or subtracted using the + or - operators (<code>DV_AMOUNT</code>
descendants) or add and substract (<code>DV_ABSOLUTE_QUANTITY</code> class), accuracy behaves in the following
way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if accuracies are present in both quantities, they are added in the result, for both addition and subtraction operations;</p>
</li>
<li>
<p>if either or both quantities has an unknown accuracy, the accuracy of the result is also unknown;</p>
</li>
<li>
<p>if two <code>DV_AMOUNT</code> descendants are added or subtracted, and only one has <code><em>accuracy_is_percent</em></code> = True, accuracy is expressed in the result in the form used in the larger of the two quantities.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The related notion of 'uncertainty' is understood as a subjective judgement made by the clinician,
indicating that he/she is not certain of a particular statement. It is not the same as accuracy: uncertainty
may apply to non-quantified values, such as subjective statements, and it is not an aspect of
objective measurement processes, but of human confidence. Where the uncertainty is due to subjective
memory e.g. "I think my grandfather was 56 when he died", the uncertainty is simply recorded as
another value, along with the main data item being recorded. Uncertainty is therefore not directly
modelled in the openEHR data types, but appears instead in particular archetypes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_quantity_ranges_2"><a class="anchor" href="#_quantity_ranges_2"></a>Quantity Ranges</h5>
<div class="paragraph">
<p>Ranges are modelled by the generic type <code>DV_INTERVAL&lt;T:DV_ORDERED&gt;</code> which enables a range of
any of the other quantity types (except ratio) to be constructed. This allows any subtype of
<code>DV_ORDERED</code> to occur as a range as well.</p>
</div>
</div>
<div class="sect4">
<h5 id="_proportions"><a class="anchor" href="#_proportions"></a>Proportions</h5>
<div class="paragraph">
<p>The <code>DV_PROPORTION</code> type is provided for representing true ratios, i.e. relative values, and consists
of numerator and denominator Real values, and a magnitude function which is computed as the result
of the numerator/denominator division. The type attribute is used to indicate the logical type of the
proportion. Supported types include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>percent</em>: denominator is 100; usual presentation is "numerator %"</p>
</li>
<li>
<p><em>unitary</em>: denominator is 1; usual presentation is "numerator"</p>
</li>
<li>
<p><em>fraction</em>: numerator and denominator are both integer values; usual presentation is n/d, e.g. such as ½ or ¾, 1/2, 3/4 etc;</p>
</li>
<li>
<p><em>integer_fraction</em>: numerator and denominator are both integer values; usual presentation is n/d; if numerator &gt; denominator, display as "a b/c", i.e. the integer part followed by the remaining fraction part, e.g. 1½; this is the most likely form for expressing a number of tablets;</p>
</li>
<li>
<p><em>ratio</em>: numerator and denominator can take any value; usual presentation is "numerator: denominator"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lastly, the <code><em>is_integral</em></code> function indicates that the numerator and denominator are both integer values;
this is used for fractions (the fraction and integer_fraction types above) and other commonly occurring
ratios where both parts are always integer values.</p>
</div>
</div>
<div class="sect4">
<h5 id="_normal_and_reference_ranges"><a class="anchor" href="#_normal_and_reference_ranges"></a>Normal and Reference Ranges</h5>
<div class="paragraph">
<p>Normal range for any of the quantity types (i.e. any instance of a subtype of <code>DV_ORDERED</code>) can be
included via the attribute <code>DV_ORDERED</code>.<code><em>normal_range</em></code>, of type <code>REFERENCE_RANGE</code>. Other reference
ranges (e.g. sub-critical, critical etc) can be included via the attribute
<code>DV_ORDERED</code>.<code><em>other_reference_ranges</em></code>. The separation of normal and other reference range attributes
is used because the former constitute the vast majority of ranges quoted for quantitative data.</p>
</div>
<div class="paragraph">
<p>Normal status can be included via the attribute <code>DV_ORDERED</code>.<code><em>normal_status</em></code>, which takes the form of
a <code>DV_ORDINAL</code>, whose symbol attribute is coded according to the openEHR terminology group "normal
status", and takes values "HHH" (critically high), "HH" (abnormally high), "H" (borderline
high)", "N" (normal), "L" &#8230;&#8203; "LLL".</p>
</div>
</div>
<div class="sect4">
<h5 id="_recording_time"><a class="anchor" href="#_recording_time"></a>Recording Time</h5>
<div class="paragraph">
<p>Time can be recorded in two ways. Absolute times in the social time domain, such as dates and time
of day are recorded using the types in the date_time package. Fine-grained 'time', which is a duration
rather than a time, is recorded using a <code>DV_QUANTITY</code> with units = 's' or another temporal unit
('h', 'ms', 'ns' etc).</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>6.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_ordered_class"><a class="anchor" href="#_dv_ordered_class"></a>6.2.1. DV_ORDERED Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_ORDERED (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract class defining the concept of ordered values, which includes ordinals as well as true quantities. It defines the functions  &lt;' and is_strictly_comparable_to, the latter of which must evaluate to True for instances being compared with the  &lt;' function, or used as limits in the DV_INTERVAL&lt;T&gt; class.</p>
</div>
<div class="paragraph">
<p>Data value types which are to be used as limits in the DV_INTERVAL&lt;T&gt; class must inherit from this class, and implement the function is_strictly_comparable_to to ensure that instances compare meaningfully. For example, instances of DV_QUANTITY can only be compared if they measure the same kind of physical quantity.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE, Ordered</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_status</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional normal status indicator of value with respect to normal range for this value. Often included by lab, even if the normal range itself is not included. Coded by ordinals in series HHH, HH, H, (nothing), L, LL, LLL; see openEHR terminology group  normal status .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_range</strong>: <code>DV_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional normal range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_reference_ranges</strong>: <code>List&lt;REFERENCE_RANGE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional tagged other reference ranges for this value in its particular measurement context.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (other: <code>DV_ORDERED</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test if two instances are strictly comparable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_simple</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this quantity has no reference ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_normal</strong>: <code>Boolean</code><br>
<strong><em>Pre</em></strong>: normal_range /= Void or normal_status /= Void<br>
<strong><em>Post_range</em></strong>: normal_range /= Void implies Result = normal_range.has (self)<br>
<strong><em>Post_status</em></strong>: normal_status /= Void implies normal_status.code_string.is_equal (“N”)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value is in the normal range, determined by comparison of the value to the normal_range if present, or by the normal_status marker if present.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>infix &lt;</strong> (other: <code>Ordered</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Other_reference_ranges_validity</em></strong>: other_reference_ranges /= Void implies not other_reference_ranges.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Is_simple_validity</em></strong>: (normal_range = Void and other_reference_ranges = Void) implies is_simple</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Normal_status_validity</em></strong>: normal_status /= Void implies code_set (Code_set_id_normal_statuses).has_code (normal_status)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Normal_range_and_status_consistency</em></strong>: (normal_range /= Void and normal_status /= Void) implies (normal_status.code_string.is_equal (“N”) xor not normal_range.has (self))</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_interval_class"><a class="anchor" href="#_dv_interval_class"></a>6.2.2. DV_INTERVAL Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_INTERVAL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Generic class defining an interval (i.e. range) of a comparable type. An interval is a contiguous subrange of a comparable base type. Used to define intervals of dates, times, quantities (whose units match) and so on. The type parameter, T, must be a descendant of the type DV_ORDERED, which is necessary (but not sufficient) for instances to be compared (strictly_comparable is also needed).</p>
</div>
<div class="paragraph">
<p>Without the DV_INTERVAL class, quite a few more DV_ classes would be needed to express logical intervals, namely interval versions of all the date/time classes, and of quantity classes. Further, it allows the semantics of intervals to be stated in one place unequivocally, including the conditions for strict comparison.</p>
</div>
<div class="paragraph">
<p>The basic semantics are derived from the class Interval&lt;T&gt;, described in the support RM.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE, Interval</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Limits_consistent</em></strong>: (not upper_unbounded and not lower_unbounded) implies (lower.is_strictly_comparable_to(upper) and lower &#8656; upper)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_reference_range_class"><a class="anchor" href="#_reference_range_class"></a>6.2.3. REFERENCE_RANGE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>REFERENCE_RANGE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Defines a named range to be associated with any ORDERED datum. Each such range is particular to the patient and context, e.g. sex, age, and any other factor which affects ranges. May be used to represent normal, therapeutic, dangerous, critical etc ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>meaning</strong>: <code>DV_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Term whose value indicates the meaning of this range, e.g.  normal,  critical,  therapeutic  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>range</strong>: <code>DV_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The data range for this meaning, e.g. critical  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_in_range</strong> (v: <code>DV_ORDERED</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Indicates if the value  val' is inside the range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Range_is_simple</em></strong>: (range.lower_unbounded or else range.lower.is_simple) and (range.upper_unbounded or else range.upper.is_simple)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_ordinal_class"><a class="anchor" href="#_dv_ordinal_class"></a>6.2.4. DV_ORDINAL Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_ORDINAL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Models rankings and scores, e.g. pain, Apgar values, etc, where there is a) implied ordering, b) no implication that the distance between each value is constant, and c) the total number of values is finite. Note that although the term  ordinal' in mathematics means natural numbers only, here any integer is allowed, since negative and zero values are often used by medical professionals for values around a neutral point. Examples of sets of ordinal values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-3, -2, -1, 0, 1, 2, 3 &#8201;&#8212;&#8201;reflex response values</p>
</li>
<li>
<p>0, 1, 2                 &#8201;&#8212;&#8201;Apgar values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This class is used for recording any clinical datum which is customarily recorded using symbolic values. Example: the results on a urinalysis strip, e.g. {neg, trace, , , } are used for leucocytes, protein, nitrites etc; for non-haemolysed blood {neg, trace, moderate}; for haemolysed blood small, moderate, large}.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_ORDERED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>symbol</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Coded textual representation of this value in the enumeration, which may be strings made from  +  symbols, or other enumerations of terms such as  mild ,  moderate ,  severe , or even the same number series as the values, e.g.  1 ,  2 ,  3 . Codes come from archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value in ordered enumeration of values. Any integer value can be used.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>limits</strong>: <code>DV_ORDINAL</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Limits of the ordinal enumeration, to allow comparison of an ordinal
value to its limits.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;</strong> (other: <code>Ordered</code>): <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = value &lt; other.value</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (other: <code>DV_ORDERED</code>): <code>Boolean</code><br>
<strong><em>Post</em></strong>: symbol.is_comparable (other.symbol) implies Result</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Limits_valid</em></strong>: limits.meaning.is_equal (“limits”)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Reference_range_valid</em></strong>: other_reference_ranges.has (limits)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_quantified_class"><a class="anchor" href="#_dv_quantified_class"></a>6.2.5. DV_QUANTIFIED Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_QUANTIFIED (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract class defining the concept of true quantified values, i.e. values which are not only ordered, but which have a precise magnitude.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_ORDERED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude_status</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional status of magnitude with values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>=   :   magnitude is a point value</p>
</li>
<li>
<p>&lt;   :   value is &lt; magnitude</p>
</li>
<li>
<p>&gt;   :   value is &gt; magnitude</p>
</li>
<li>
<p>&lt;= : value is &#8656; magnitude</p>
</li>
<li>
<p>&gt;= : value is &gt;= magnitude</p>
</li>
<li>
<p>~   :   value is approximately magnitude</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, meaning is  = .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_magnitude_status</strong>: <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = s.is_equal (“=”) or s.is_equal (“&lt;”) or s.is_equal (“&gt;”) or s.is_equal (“&#8656;”) or s.is_equal (“&gt;=”) or s.is_equal (“~”)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test whether a string value is one of the valid values for the magnitude_status attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code>Ordered_Numeric</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy_unknown</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if accuracy is not known, e.g. due to not being recorded or discernable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Magnitude_status_valid</em></strong>: magnitude_status /= Void implies valid_magnitude_status (magnitude_status)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_amount_class"><a class="anchor" href="#_dv_amount_class"></a>6.2.6. DV_AMOUNT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_AMOUNT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract class defining the concept of relative quantified  amounts'. For relative quantities, the  +' and  -' operators are defined (unlike descendants of DV_ABSOLUTE_QUANTITY, such as the date/time types).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_QUANTIFIED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy_is_percent</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>If True, indicates that when this object was created, accuracy was recorded as a percent value; if False, as an absolute quantity value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accuracy of measurement, expressed either as a half-range percent value (accuracy_is_percent = True) or a half-range quantity. A value of 0 means that accuracy is 100%, i.e. no error.</p>
</div>
<div class="paragraph">
<p>A value of unknown_accuracy_value means that accuracy was not recorded.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_percentage</strong> (number: <code>Ordered_Numeric</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test whether a number is a valid percentage, i.e. between 0 and 100.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>infix +</strong> (other: <code>DV_AMOUNT</code>): <code>DV_AMOUNT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Sum of this quantity and another whose formal type must be the difference type of this quantity. The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;
*both operand accuracies are unknown_accuracy_value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the accuracy value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>infix -</strong> (other: <code>DV_AMOUNT</code>): <code>DV_AMOUNT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Negated version of current object, such as used for representing a difference, e.g. a weight loss.</p>
</div>
<div class="paragraph">
<p>The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the accuracy value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prefix -</strong>: <code>DV_AMOUNT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Negated version of current object, such as used for representing a difference, e.g. a weight loss.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>infix =</strong> (source: <code>DV_AMOUNT</code>): <code>DV_AMOUNT</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Accuracy_is_percent_validity</em></strong>: accuracy = 0 implies not accuracy_is_percent</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Accuracy_validity</em></strong>: accuracy_is_percent implies valid_percentage (accuracy)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_quantity_class"><a class="anchor" href="#_dv_quantity_class"></a>6.2.7. DV_QUANTITY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_QUANTITY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Quantitified type representing  scientific  quantities, i.e. quantities expressed as a magnitude and units.  Units were inspired by the Unified Code for Units of Measure (UCUM), developed by Gunther Schadow and Clement J. McDonald of The Regenstrief Institute.</p>
</div>
<div class="paragraph">
<p>Can also be used for time durations, where it is more convenient to treat these as simply a number of seconds rather than days, months, years.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_AMOUNT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Numeric magnitude of the quantity.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precision</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Precision to which the value of the quantity is expressed, in terms of number of decimal places. The value 0 implies an integral quantity.
The value -1 implies no limit, i.e. any number of decimal places.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>units</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Stringified units, expressed in UCUM unit syntax, e.g. "kg/m2", “mm[Hg]", "ms-1", "km/h". Implemented accordingly in subtypes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_integral</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_count_class"><a class="anchor" href="#_dv_count_class"></a>6.2.8. DV_COUNT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_COUNT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Countable quantities. Used for countable types such as pregnancies and steps (taken by a physiotherapy patient), number of cigarettes smoked in a day.</p>
</div>
<div class="paragraph">
<p>Misuse: Not to be used for amounts of physical entities (which all have units).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_AMOUNT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code>Integer64</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_proportion_class"><a class="anchor" href="#_dv_proportion_class"></a>6.2.9. DV_PROPORTION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PROPORTION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Models a ratio of values, i.e. where the numerator and denominator are both pure numbers. The valid_proportion_kind property of the PROPORTION_KIND class is
used to control the type attribute to be one of a defined set.</p>
</div>
<div class="paragraph">
<p>Used for recording titers (e.g. 1:128), concentration ratios, e.g. Na:K (unitary denominator), albumin:creatinine ratio, and percentages, e.g. red cell distirbution width (RDW).</p>
</div>
<div class="paragraph">
<p>Misuse: Should not be used to represent things like blood pressure which are often written using a  '/' character, giving the misleading impression that the item is a ratio, when in fact it is a structured value. Similarly, visual acuity, often written as (e.g.) “6/24” in clinical notes is not a ratio but an ordinal (which includes non-numeric symbols like CF = count fingers etc). Should not be used for formulations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">PROPORTION_KIND, DV_AMOUNT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>numerator</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Numerator of ratio</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>denominator</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Denominator of ratio.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Indicates semantic type of proportion, including percent, unitary etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precision</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Precision  to  which  the  numerator and denominator values of  the  proportion are expressed, in terms of number  of  decimal places. The value 0 implies an integral quantity. The value -1 implies no limit, i.e. any number of decimal places.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_integral</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the numerator and denominator values are integers, i.e. if the precision is 0.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operator=</strong> (source: <code>DV_PROPORTION</code>): <code>DV_PROPORTION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Assignment operator</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Effective magnitude represented by ratio.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Type_validity</em></strong>: valid_proportion_kind (type)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Precision_validity</em></strong>: precision = 0 implies is_integral</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Is_integral_validity</em></strong>: is_integral implies (numerator.floor = numerator and denominator.floor = denominator)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Fraction_validity</em></strong>: (type = pk_fraction or type = pk_integer_fraction) implies is_integral</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Unitary_validity</em></strong>: type = pk_unitary implies denominator = 1</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Percent_validity</em></strong>: type = pk_percent implies denominator = 100</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Valid_denominator</em></strong>: denominator /= 0.0</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_proportion_kind_class"><a class="anchor" href="#_proportion_kind_class"></a>6.2.10. PROPORTION_KIND Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>PROPORTION_KIND</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Class of enumeration constants defining types of proportion for the DV_PROPORTION class.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_ratio</strong>: <code>Integer&#160;=&#160;0</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Ratio type. Numerator and denominator may be any value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_unitary</strong>: <code>Integer&#160;=&#160;1</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Denominator must be 1.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_percent</strong>: <code>Integer&#160;=&#160;2</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Denominator is 100, numerator is understood as a percentage value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_fraction</strong>: <code>Integer&#160;=&#160;3</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Numerator and denominator are integral, and the presentation method uses a slash, e.g.  1/2 .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_integer_fraction</strong>: <code>Integer&#160;=&#160;4</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Numerator and denominator are integral, and the presentation method uses a slash, e.g.  1/2 ; if the numerator is greater than the denominator, e.g. n=3, d=2, the presentation is  1 1/2 .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_proportion_kind</strong> (nq: <code>Integer</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if n is one of the defined types.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_absolute_quantity_class"><a class="anchor" href="#_dv_absolute_quantity_class"></a>6.2.11. DV_ABSOLUTE_QUANTITY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_ABSOLUTE_QUANTITY (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract class defining the concept of quantified entities whose values are absolute with respect to an origin. Dates and Times are the main example.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_QUANTIFIED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code>DV_AMOUNT</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> (other: <code>DV_ABSOLUTE_QUANTITY</code>): <code>DV_AMOUNT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Difference of two quantities.</p>
</div>
<div class="paragraph">
<p>The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> (a_diff: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Addition of a differential amount to this quantity.</p>
</div>
<div class="paragraph">
<p>The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> (a_diif: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Result of subtracting a differential amount from this quantity.</p>
</div>
<div class="paragraph">
<p>The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes"><a class="anchor" href="#_syntaxes"></a>6.3. Syntaxes</h3>
<div class="sect3">
<h4 id="_units_syntax"><a class="anchor" href="#_units_syntax"></a>6.3.1. Units Syntax</h4>
<div class="paragraph">
<p>The BNF syntax specification of the units string, adapted from <a href="#UCUM">[UCUM]</a> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span class="tok-k">units </span><span class="tok-o">=</span> <span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;.&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">exp_units </span><span class="tok-p">;</span>
<span class="tok-k">exp_units </span><span class="tok-o">=</span> <span class="tok-k">unit_group exponent </span><span class="tok-p">|</span> <span class="tok-k">unit_group </span><span class="tok-p">;</span>
<span class="tok-k">unit_group </span><span class="tok-o">=</span> <span class="tok-k">PREFIX annot_unit </span><span class="tok-p">|</span> <span class="tok-k">annot_unit </span><span class="tok-p">|</span> <span class="tok-s1">&#39;(&#39;</span> <span class="tok-k">exp_units </span><span class="tok-s1">&#39;)&#39;</span> <span class="tok-p">|</span> <span class="tok-k">factor </span><span class="tok-p">;</span>
<span class="tok-k">annot_unit </span><span class="tok-o">=</span> <span class="tok-k">unit_name </span><span class="tok-p">[</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">]</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">factor </span><span class="tok-o">=</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>
<span class="tok-k">exponent </span><span class="tok-o">=</span> <span class="tok-p">[</span> <span class="tok-k">SIGN </span><span class="tok-p">]</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>

<span class="tok-k">PREFIX </span><span class="tok-o">=</span> <span class="tok-s1">&#39;Y&#39;</span> <span class="tok-p">|</span><span class="tok-s1">&#39;Z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;E&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;P&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;T&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;G&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;M&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;k&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;h&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;da&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;d&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;c&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;m&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;μ&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;n&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;p&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;f&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;a&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;y&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">UNIT_NAME </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z_%]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">ANNOTATION </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z&#39;.]+ ?</span><span class="tok-p">;</span>  <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SUFFIX </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z0-9&#39;_]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SIGN </span><span class="tok-o">=</span> <span class="tok-s1">&#39;+&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;-&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">Integer </span><span class="tok-o">=</span> <span class="tok-ni">? [0-9]+ ?</span><span class="tok-p">;</span>          <span class="tok-cm">(* regex *)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This proposal is comprehensive, covering all useful unit systems, including SI, various imperial, customary
mesaures, and some obscure measures, as well as clinically specific additions. Metric prefixes,
meaning-changing textual suffixes (e.g. "[Hg]" in "mm[Hg]") and non-meaning-changing
annotations (e.g. "kg {total}") are recognised. With this syntax, units can be simply expressed in
strings such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>"kg/m^2", "m.s^-1", "km/h", "mm[Hg]"</code></pre>
</div>
</div>
<div class="paragraph">
<p>and so on.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_date_time_package"><a class="anchor" href="#_date_time_package"></a>7. Date Time Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>7.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.quantity.date_time</code> package includes three absolute date/time concepts:
<code>DV_DATE</code>, <code>DV_TIME</code>, <code>DV_DATE_TIME</code>, and a relative concept: <code>DV_DURATION</code>. The representations of
all of these are ISO8601:2004-compatible date/time strings. They also include the ISO8601 semantics
for partial dates and times. The <code>quantity.date_time</code> package is illustrated below.</p>
</div>
<div id="rm_data_types_quantity_date_time" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types.quantity.date_time.svg" alt="RM data types.quantity.date time">
</div>
<div class="title">Figure 9. rm.data_types.quantity.date_time package</div>
</div>
<div class="sect3">
<h4 id="_requirements_4"><a class="anchor" href="#_requirements_4"></a>7.1.1. Requirements</h4>
<div class="sect4">
<h5 id="_standard_date_times"><a class="anchor" href="#_standard_date_times"></a>Standard Date/Times</h5>
<div class="paragraph">
<p>The basic requirement is for types which represent the following concepts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Date</em>: a type which records year, month and day in month. Examples include date of birth, date of onset of a problem</p>
</li>
<li>
<p><em>Time</em>: a type which records hour, minute, second, and timezone. Examples include time of meal, time of day when a problem recurs. Timezone is required in a shared EHR repository so that times of clinical events which occurred in different timezones are comparable; this includes specialised pathology tests which might be done in another country.</p>
</li>
<li>
<p><em>Date_time</em>: a type which records year, month, day, hour, minute, second, and timezone. Examples include date &amp; time of death, timestamp of any observation. Timezone required for the same reason as in Time.</p>
</li>
<li>
<p><em>Duration</em>: a type which records duration of an event or (in)activity, as days, hours, minutes, and seconds.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_partial_date_times"><a class="anchor" href="#_partial_date_times"></a>Partial Date/Times</h5>
<div class="paragraph">
<p>Partial or uncertain date/times have to be supported in clinical medicine. It is common for patients to
be unsure about dates and durations. Requirements for partial date/times include the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For dates, one of the following rules applies to any instance:</p>
<div class="ulist">
<ul>
<li>
<p>only the year is known</p>
</li>
<li>
<p>only the year and month are known</p>
</li>
<li>
<p>If not even the year is known, then the date is obviously extremely approximate and it would
probably be unsafe to represent it computationally. However, if computatable representation
was needed in this case, a date interval can be used. A pedantic example which breaks these
rules is someone who claims to be born on "a Monday at the start of May in 1934" (i.e. day
but not date unknown). Either the clinician determines what date the first Monday in May
1934 actually was and record that (assuming the patient&#8217;s way of accurately remembering
just happens to be via day rather than date), or else records a partial date of the form "May
1934" (in ISO 8601 form, "1934-05") if they determine that the patient really is unsure.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Sometimes incomplete times are recorded, which follow the same rule that either the hours
or both the hours and minutes are present. Examples:</p>
<div class="ulist">
<ul>
<li>
<p>recordings by instruments which only generate hh:mm values (i.e. no seconds);</p>
</li>
<li>
<p>recordings by patients who report approximate times of events;</p>
</li>
<li>
<p>recordings by clinicians who use approximate times in administrations, e.g. "take insulin at 8am" really means something like 8am +/- 30 mins.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Imprecise durations such as "2 - 3 hrs" need to be recordable in a computable form.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To satisfy the faithfulness requirement for health record recording it should always be possible to
record the narrative form of the datum provided by the patient as well as the formal form.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_4"><a class="anchor" href="#_design_4"></a>7.1.2. Design</h4>
<div class="sect4">
<h5 id="_general_approach"><a class="anchor" href="#_general_approach"></a>General Approach</h5>
<div class="paragraph">
<p>Date/time values are somewhat special in the realm of data types in that they are expressed in their
"customary" form, in which the standard structure of {value, unit} and metric relationships between
orders of magnitude do not hold. The customary form is what we are used to using in the social time
domain, such as births, deaths, ages, and times and durations of events which we remember. In all
these cases it is expressed using the familiar year/month/date/hour/minute/second system, in which
the relationships between each successive unit of time is non-metric. The customary form can be converted
to a magnitude since an origin point, and many date/time libraries do this in order to implement
various operations, particularly comparison.</p>
</div>
<div class="paragraph">
<p>The date/time types fall into two categories: <em>absolute</em> and <em>relative</em>. The absolute category comprises
the Date, Date_time and Time concepts, each of which measure time from a known origin. Date and
Date_time measure calendrical time from the date 0001-01-01, while Time measures clock time from
midnight. Both Date_time and Time can include timezone information, ensuring that their instances
are correctly situated on the same timeline. All absolute time types inherit from the <code>DV_TEMPORAL</code>
type, which provides the appropriate signature for the <code><em>diff()</em></code> function.</p>
</div>
<div class="paragraph">
<p>The relative category contains only the Duration concept, which expresses elapsed time between two
time points. The <code>DV_DURATION</code> class is used for expressing durations of clinical phenomena and differences
between absolute times.</p>
</div>
<div class="paragraph">
<p>All four concepts are defined in the ISO 8601:2004 standard, which is accordingly used as the definitional
basis of the openEHR date/time types.</p>
</div>
</div>
<div class="sect4">
<h5 id="_partial_date_times_2"><a class="anchor" href="#_partial_date_times_2"></a>Partial Date/Times</h5>
<div class="paragraph">
<p>The types defined in this specification support the notion of partially specified dates and times. The
modelling approach used here takes into account the known needs for representing partial date/time
data, while balancing that with the need to avoid incomprehensibly complex types whose generality
would only apply to a tiny percent of difficult cases. Thus, the basis for modelling incomplete
date/times is as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The modelling problem relates only to date/time quantities that need to be computable. For extremely imprecise date/times, if the clinician feels the need, she can record it as narrative text.</p>
</li>
<li>
<p>For imprecise durations, an interval should be used, i.e. <code>DV_INTERVAL&lt;DV_DURATION&gt;</code>. In this way durations like "2 - 3 hrs" can be represented, and still be computable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Based on the above considerations, the requirements for partial types are satisfied by the semantics of
ISO8601:2004 for "reduced accuracy" date/times, in which parts of a date, time or date/time can be
missing from the right hand end of the string. This models the reasonable situation where e.g. day
may be unknown in a date, but a date cannot have month unknown and day known.</p>
</div>
</div>
<div class="sect4">
<h5 id="_calendars"><a class="anchor" href="#_calendars"></a>Calendars</h5>
<div class="paragraph">
<p>A comment on calendars is in order. In this specification, all date/time types currently modelled are
Gregorian calendar based. This is the same assumption made by by ISO 8601, and most technical
computing systems today in many parts of the world. At first glance this may seem like a culturally
insensitive approach, but in fact it makes sense in computational terms, for both users of the Gregorian and other calendars, e.g. Julian, Islamic, Baha&#8217;i, etc. Arguments against trying to use the
date/time classes defined here to represent date/times from any calendar include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Almost all dates on computer systems, including in regions such as the Indian sub-continent,
Turkey and the middle east, where alternate calendars are in use, are in the Gregorian system.
This is likely to be the case for some time, and may always be the case, regardless of
the continued use of other calendars for religious or other purposes (outside of health);</p>
</li>
<li>
<p>If a calendar indicator were used in date quantities, all software, to be correct, would have to
check the value to verify that it is in the expected calendar system, and to do something special
if it is not - an added cost which is a possible source of bugs and which would rarely be
used. The reality is that most software produced in the western world, India etc (possibly
excepting open source software) would automatically assume the Gregorian calendar, and
would be in error if ever it did receive EHR data containing dates from alternate calendars.</p>
</li>
<li>
<p>If/when other calendars are used in EHR or related systems, the users of those calendars will
be aware of it, and include the appropriate conversion logic between Gregorian dates and
their own, limiting the extra software work and quality issues to those users who actually
need alternate calendars. If EHRs from such places are sent to a health care facility where
Gregorian is the default, nothing special is needed to ensure that those records will contain
dates comprehensible to the receiver.</p>
</li>
<li>
<p>The detailed model of date/times in some other calendars is not the same as in the Gregorian
calendar, so they would require different classes anyway - the classes defined here would
not necessarily function correctly simply by adding a calendar field.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For users requiring non-Gregorian dates in EHR and other health systems there are two approaches.
One is to treat non-Gregorian dates as a localisation issue, to be handled inside the application and
GUI evnvironment. The other is to actually add further sibling packages to the openEHR date/time
package, for each new calendar or calendar group required. Conversion algorithms would most likely
be needed in and out of the Gregorian types to enable interoperability of information drawn from different
applications or sources. This approach may require a substantial modelling effort.</p>
</div>
<div class="paragraph">
<p>Algorithms for conversion between the Egyptian, Armenian, Khwarizmian, Persian, Ethiopian, Coptic,
Republican, Macedonian, Syrian, Julian Roman, Gregorian, Islamic A, Islamic B, Baha&#8217;i and
Saka calendars are described by Richards <a href="#Richards_1998">[Richards_1998]</a> and are based on the work of D. A. Hatcher (1986).</p>
</div>
</div>
<div class="sect4">
<h5 id="_representation"><a class="anchor" href="#_representation"></a>Representation</h5>
<div class="paragraph">
<p>All of the date/time classes described here are defined so as to have an attribute called value of type
String, in the form of an ISO 8601:2004 string. ISO 8601 is convenient for this purpose, as it is a simple
syntax, and covers not only all four variants of fully-specified date/time described here, but also
the partial varieties. Using a single string attribute significantly simplifies persistence as well as mapping
to XML-based formalisms, which use a mostly ISO 8601 compliant date/time representation.
The ISO 8601 semantics assumed by EHR are defined in classes found in the classes
<code>ISO8601_DATE</code>, <code>ISO8601_TIME</code>, <code>ISO8601_DATE_TIME</code>, <code>ISO8601_DURATION</code>, from the
rm.support.assumed_types package. These classes are inherited into the corresponding classes
defined below.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_4"><a class="anchor" href="#_class_descriptions_4"></a>7.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_temporal_class"><a class="anchor" href="#_dv_temporal_class"></a>7.2.1. DV_TEMPORAL Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_TEMPORAL (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Specialised temporal variant of DV_ABSOLUTE_QUANTITY whose diff type is DV_DURATION.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_ABSOLUTE_QUANTITY</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> (other: <code>DV_TEMPORAL</code>): <code>DV_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Difference of two quantities.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_date_class"><a class="anchor" href="#_dv_date_class"></a>7.2.2. DV_DATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_DATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Represents an absolute point in time, as measured on the Gregorian calendar, and specified only to the day. Semantics defined by ISO 8601. Used for recording dates in real world time. The partial form is used for approximate birth dates, dates of death, etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_TEMPORAL, ISO8601_DATE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ISO8601 date string.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Numeric value of the date as days since the calendar origin point 0001-01-01.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (other: <code>DV_ORDERED</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test if two instances are strictly comparable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>infix &lt;</strong> (other_quantity: <code>DV_ORDERED</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Tests if this date is earlier than the cited date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> (a_diff: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add a time period to this date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> (a_diif: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Subtract a time period from this date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> (other: <code>DV_DATE</code>): <code>DV_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Difference of two quantities.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Value_valid</em></strong>: valid_iso8601_date(value)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_time_class"><a class="anchor" href="#_dv_time_class"></a>7.2.3. DV_TIME Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Represents an absolute point in time from an origin usually interpreted as eaning the start of the current day, specified to the second. Semantics defined by ISO 8601.</p>
</div>
<div class="paragraph">
<p>Used for recording real world times, rather than scientifically measured fine amounts of time. The partial form is used for approximate times of events and substance administrations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_TEMPORAL, ISO8601_TIME</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ISO8601 time string</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operator=</strong> (source: <code>DV_TIME</code>): <code>DV_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Numeric value of the time as seconds since the start of day.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (other: <code>DV_ORDERED</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test if two instances are strictly comparable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> (a_diff: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add a time period to this time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> (a_diif: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Subtract a duration from this time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> (other: <code>DV_TIME</code>): <code>DV_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Difference of two quantities.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Value_valid</em></strong>: valid_iso8601_time (value)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_date_time_class"><a class="anchor" href="#_dv_date_time_class"></a>7.2.4. DV_DATE_TIME Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_DATE_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Represents an absolute point in time, specified to the second. Semantics defined by ISO 8601.</p>
</div>
<div class="paragraph">
<p>Used for recording a precise point in real world time, and for approximate time stamps, e.g. the origin of a HISTORY in an OBSERVATION which is only partially known.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_TEMPORAL, ISO8601_DATE_TIME</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ISO8601 date/time string.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operator=</strong> (source: <code>DV_DATE_TIME</code>): <code>DV_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Numeric value of the date/time as seconds since the calendar origin point 0001-01-01T00:00:00.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (other: <code>DV_ORDERED</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test if two instances are strictly comparable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> (a_diff: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add a time period to this date_time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> (a_diif: <code>DV_AMOUNT</code>): <code>DV_ABSOLUTE_QUANTITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Subtract a time period from this date_time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> (other: <code>DV_ABSOLUTE_QUANTITY</code>): <code>DV_AMOUNT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Difference of two quantities.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>as_string</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Value_valid</em></strong>: valid_iso8601_date_time (value)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_duration_class"><a class="anchor" href="#_dv_duration_class"></a>7.2.5. DV_DURATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_DURATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Represents a period of time with respect to a notional point in time, which is not specified. A sign may be used to indicate the duration is  backwards  in time rather than forwards.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
a deviation from ISO8601 is supported, allowing the  W' designator to be mixed with other designators. See assumed types section in the Support IM.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Used for recording the duration of something in the real world, particularly when there is a need a) to represent the duration in customary format, i.e. days, hours, minutes etc, and b) if it will be used in computational operations with date/time quantities, i.e. additions, subtractions etc.</p>
</div>
<div class="paragraph">
<p>Misuse: Durations cannot be used to represent points in time, or intervals of time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_AMOUNT, ISO8601_DURATION</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (other: <code>DV_ORDERED</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Value_valid</em></strong>: valid_iso8601_duration (value)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_time_specification_package"><a class="anchor" href="#_time_specification_package"></a>8. Time_specification Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_6"><a class="anchor" href="#_overview_6"></a>8.1. Overview</h3>
<div class="paragraph">
<p>Time specification is about potentiality rather than actuality, and needs its own types. The openEHR
<code>data_types.time_specification</code> package provides such types, based on the HL7 types of the
same names, and is illustrated below.</p>
</div>
<div id="rm_data_types_time_specification" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types.time_specification.svg" alt="RM data types.time specification">
</div>
<div class="title">Figure 10. rm.data_types.time_specification package</div>
</div>
<div class="sect3">
<h4 id="_requirements_5"><a class="anchor" href="#_requirements_5"></a>8.1.1. Requirements</h4>
<div class="paragraph">
<p>One of the difficulties with time is expressing future times, since potential occurrences, durations,
repetitions cannot be expressed in the same way as actual time. Complicating the problem is the fact
that humans tend to use very customary (i.e. calandar-anchored) ways of specifying time, such as
"every second Tuesday", or "the first Sunday of the month". In clinical medicine, future time is most
commonly used to express when medications or other therapies are intended to take place. They are
often anchored to the calendar, and can easily include repetitions.</p>
</div>
<div class="paragraph">
<p>As with other time types, there are both simple and complex cases to consider. One of the most common
examples of time in the future is the timing for drug administrations, e.g. "once every four
hours". This could be represented as a simple periodic specification, consisting of a start point in
time, a period, and a number of repetitions. The specification for taking blood sugar levels during a
glucose test could be represented as a simple aperiodic series, e.g. ".5hr, 1hr, 2hr". However, even
common specifications for prescriptions e.g. "three times a day for seven days" start to become quite
complex, for example, because "three times a day" might not mean literally 8 hours apart.</p>
</div>
<div class="paragraph">
<p>Some of the factors to consider in timing specifications are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>period of repetition</p>
</li>
<li>
<p>duration of activity being specified</p>
</li>
<li>
<p>possible alignment to the calendar, e.g. "every 5th of the month"</p>
</li>
<li>
<p>possible alignment to real world events e.g. "after meals"</p>
</li>
<li>
<p>fuzziness</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because time is inherently "messy" (months do not all have the same number of days, leap years
change the number of days in some years etc), and because the relationship we have with time can
also be arbitrary (e.g. anchored to mealtimes etc), specifying linguistically obvious specifications formally
is quite challenging.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_5"><a class="anchor" href="#_design_5"></a>8.1.2. Design</h4>
<div class="paragraph">
<p>The HL7 version 3 data types for time specification appear to allow for all of the required possibilities.
The syntax is based on the ISO 8601 standard <a href="#ISO_8601">[ISO_8601]</a>. It provides types which express:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Periodic intervals (HL7v3 - <code>PIVL&lt;T:TS&gt;</code>) - allows period, duration, and calendar linking to
be specified.</p>
</li>
<li>
<p>Event-linked periodic intervals (HL7v3 - <code>EIVL&lt;T:TS&gt;</code>) - allows PIVLs to be linked to realworld
events like meals.</p>
</li>
<li>
<p>General timing specification (HL7v3 - GTS) - allows any time specification to be expressed,
using a syntax which is equivalet to a series of <code>IVL&lt;TS&gt;</code> (i.e. intervals of <code>DATE_TIME</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The HL7 syntax for time specification is encapsulated in equivalent openEHR types described here.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_5"><a class="anchor" href="#_class_descriptions_5"></a>8.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_time_specification_class"><a class="anchor" href="#_dv_time_specification_class"></a>8.2.1. DV_TIME_SPECIFICATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_TIME_SPECIFICATION (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>This is an abstract class of which all timing specifications are specialisations. Specifies points in time, possibly linked to the calendar, or a real world repeating event, such as  breakfast.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>DV_PARSABLE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The specification, in the HL7v3 syntax for PIVL or EIVL types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>calendar_alignment</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Indicates what prototypical point in the calendar the specification is aligned to, e.g.  5th of the month . Empty if not aligned. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>event_alignment</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Indicates what real-world event the specification is aligned to if any. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>institution_specified</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Indicates if the specification is aligned with institution schedules, e.g. a hospital nursing changeover or meal serving times. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_periodic_time_specification_class"><a class="anchor" href="#_dv_periodic_time_specification_class"></a>8.2.2. DV_PERIODIC_TIME_SPECIFICATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PERIODIC_TIME_SPECIFICATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Specifies periodic points in time, linked to the calendar (phase-linked), or a real world repeating event, such as  breakfast  (event-linked). Based on the HL7v3 data types PIVL&lt;T&gt; and EIVL&lt;T&gt;.</p>
</div>
<div class="paragraph">
<p>Used in therapeutic prescriptions, expressed as INSTRUCTIONs in the openEHR model.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_TIME_SPECIFICATION</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>period</strong>: <code>DV_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The period of the repetition, computationally derived from the syntax representation. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>calendar_alignment</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Calendar alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>event_alignment</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Event alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>institution_specified</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Value_valid</em></strong>: value.formalism.is_equal (“HL7:PIVL”) or value.formalism. is_equal (“HL7:EIVL”)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_general_time_specification_class"><a class="anchor" href="#_dv_general_time_specification_class"></a>8.2.3. DV_GENERAL_TIME_SPECIFICATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_GENERAL_TIME_SPECIFICATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Specifies points in time in a general syntax. Based on the HL7v3 GTS data type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_TIME_SPECIFICATION</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>calendar_alignment</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Calendar alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>event_alignment</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Event alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>institution_specified</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Extracted from value.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes_2"><a class="anchor" href="#_syntaxes_2"></a>8.3. Syntaxes</h3>
<div class="sect3">
<h4 id="_phase_linked_time_specification_syntax"><a class="anchor" href="#_phase_linked_time_specification_syntax"></a>8.3.1. Phase-linked Time Specification Syntax</h4>
<div class="paragraph">
<p>The syntactic form of phase-linked periodic time specifications (derived from the <code>PIVL&lt;T&gt;</code> spec
HL7v3 ballot) is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"[" interval "]" "/" "(" difference ")" [ "@" alignment ] [ "IST" ]</pre>
</div>
</div>
<div class="paragraph">
<p>Examples include:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>* [200004181100;200004181110]/(7d)@DW = every Tuesday from 11:00 to 11:10 AM.
* [200004181100;200004181110]/(1mo)@DM" = every 18th of the month 11:00 to 11:10 AM.</pre>
</div>
</div>
<div class="paragraph">
<p>A parse specification is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span class="tok-k">phase_linked_time_spec </span><span class="tok-o">=</span> <span class="tok-k">pure_phase_linked_time_spec </span><span class="tok-p">[</span> <span class="tok-s2">&quot;IST&quot;</span> <span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">pure_phase_linked_time_spec </span><span class="tok-o">=</span> <span class="tok-k">phase </span><span class="tok-p">[</span> <span class="tok-s2">&quot;@&quot;</span> <span class="tok-k">alignment </span><span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">phase </span><span class="tok-o">=</span> <span class="tok-k">interval </span><span class="tok-s2">&quot;/&quot;</span> <span class="tok-s2">&quot;(&quot;</span> <span class="tok-k">difference </span><span class="tok-s2">&quot;)&quot;</span> <span class="tok-p">;</span>
<span class="tok-k">alignment </span><span class="tok-o">=</span> <span class="tok-s2">&quot;DW&quot;</span> <span class="tok-p">|</span> <span class="tok-k">etc </span><span class="tok-p">;</span>                  <span class="tok-cm">(* terms from &quot;HL7::CalendarCycle&quot; domain *)</span>
<span class="tok-k">difference </span><span class="tok-o">=</span>  <span class="tok-p">;</span>                           <span class="tok-cm">(* ISO 8601 for time difference *)</span>
<span class="tok-k">interval </span><span class="tok-o">=</span> <span class="tok-s2">&quot;[&quot;</span> <span class="tok-k">interval_spec </span><span class="tok-s2">&quot;]&quot;</span> <span class="tok-p">;</span>
<span class="tok-k">interval_spec </span><span class="tok-o">=</span> <span class="tok-s2">&quot;;&quot;</span> <span class="tok-p">|</span> <span class="tok-s2">&quot;;&quot;</span> <span class="tok-k">date_time </span><span class="tok-p">|</span> <span class="tok-k">date_time </span><span class="tok-s2">&quot;;&quot;</span> <span class="tok-k">date_time </span><span class="tok-p">|</span> <span class="tok-k">date_time </span><span class="tok-s2">&quot;;&quot;</span> <span class="tok-p">;</span>
<span class="tok-k">date_time </span><span class="tok-o">=</span> <span class="tok-cm">(* ISO 8601 for date/time string yyyymmdd[hh[mm[ss]]] *)</span> <span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_linked_periodic_time_specification_syntax"><a class="anchor" href="#_event_linked_periodic_time_specification_syntax"></a>8.3.2. Event-linked Periodic Time Specification Syntax</h4>
<div class="paragraph">
<p>Examples of event-linked periodic time specifications include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"PC+[1h;1h]" = one hour after meal</p>
</li>
<li>
<p>"HS-[50min;1h]" = one hour before bedtime for 10 minutes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following parse specification defines the syntax for event-related periodic time specifications.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span class="tok-k">event_linked_time_spec </span><span class="tok-o">=</span> <span class="tok-k">event </span><span class="tok-p">|</span> <span class="tok-k">event offset </span><span class="tok-p">;</span>
<span class="tok-k">event </span><span class="tok-o">=</span> <span class="tok-s2">&quot;AC&quot;</span> <span class="tok-p">|</span> <span class="tok-s2">&quot;ACD&quot;</span> <span class="tok-p">|</span> <span class="tok-k">etc </span><span class="tok-p">;</span>             <span class="tok-cm">(* HL7 domain &quot;HL7::TimingEvent&quot; *)</span>
<span class="tok-k">offset </span><span class="tok-o">=</span> <span class="tok-p">(</span> <span class="tok-s2">&quot;+&quot;</span> <span class="tok-p">|</span> <span class="tok-s2">&quot;-&quot;</span> <span class="tok-p">)</span> <span class="tok-k">dur_interval </span><span class="tok-p">;</span>
<span class="tok-k">dur_interval </span><span class="tok-o">=</span> <span class="tok-p">;</span>                         <span class="tok-cm">(* ISO 8601 for duration interval *)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_general_time_specification_syntax"><a class="anchor" href="#_general_time_specification_syntax"></a>8.3.3. General Time Specification Syntax</h4>
<div class="paragraph">
<p>The class is the same structurally as the <code>DV_TIME_SPECIFICATION</code> parent. The syntax is the HL7
GTS syntax, defined by the following parse specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span class="tok-k">general_time_spec </span><span class="tok-o">=</span> <span class="tok-k">symbol </span><span class="tok-p">|</span> <span class="tok-k">union </span><span class="tok-p">|</span> <span class="tok-k">exclusion </span><span class="tok-p">;</span>
<span class="tok-k">union </span><span class="tok-o">=</span> <span class="tok-k">intersection  </span><span class="tok-p">[</span><span class="tok-s2">&quot;;&quot;</span> <span class="tok-k">union </span><span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">exclusion </span><span class="tok-o">=</span> <span class="tok-k">exclusion </span><span class="tok-s2">&quot;\&quot;</span> <span class="tok-k">intersection </span><span class="tok-p">;</span>
<span class="tok-k">intersection </span><span class="tok-o">=</span> <span class="tok-k">factor intersection </span><span class="tok-p">|</span> <span class="tok-k">factor </span><span class="tok-p">;</span>
<span class="tok-k">hull </span><span class="tok-o">=</span> <span class="tok-k">factor </span><span class="tok-p">[</span> <span class="tok-s2">&quot;..&quot;</span> <span class="tok-k">hull </span><span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">factor </span><span class="tok-o">=</span> <span class="tok-k">interval </span><span class="tok-p">|</span> <span class="tok-k">phase_linked_time_spec </span><span class="tok-p">|</span> <span class="tok-k">event_linked_time_spec </span><span class="tok-p">|</span> <span class="tok-s2">&quot;(&quot;</span> <span class="tok-k">general_time_spec </span><span class="tok-s2">&quot;)&quot;</span> <span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encapsulated_package"><a class="anchor" href="#_encapsulated_package"></a>9. Encapsulated Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_7"><a class="anchor" href="#_overview_7"></a>9.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.encapsulated</code> package contains classes representing data values whose internal
structure is defined outside the EHR model, such as multimedia and parsable data. It is illustrated below.</p>
</div>
<div id="rm_data_types_encapsulated" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types.encapsulated.svg" alt="RM data types.encapsulated">
</div>
<div class="title">Figure 11. rm.data_types.encapsulated package</div>
</div>
<div class="sect3">
<h4 id="_requirements_6"><a class="anchor" href="#_requirements_6"></a>9.1.1. Requirements</h4>
<div class="paragraph">
<p>There is a need to be able to include content in the EHR whose interior structure is not modelled in
the EHR reference model, but instead documented by sufficient meta-data attributes for specific tools
to process the data. Types of content in this category are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Images, including images which are themselves a compressed version of one image from a
high-resolution image set stored elsewhere. Such images may be in any of the well-known
compressed or uncompressed formats, and may have their own thumbnail image attached, to
facilitate web-viewing.</p>
</li>
<li>
<p>Bio-signal data series, such as a set of values representing a diagnostic part of an ECG trace.
This might be represented as DICOM content.</p>
</li>
<li>
<p>Content which is textual (or nearly so) which is essentially a parsable language file of some
kind. This includes all XML instance, HTML, and any other EHR content which happens to
be represented in syntax form - such as the unit strings used in quantities. The name of the
formalism should be stored as meta-data.</p>
</li>
<li>
<p>Binary content which is processed by a work processor or other dedicated tool.</p>
</li>
<li>
<p>Digital signatures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sufficient meta-data must be included with all of these types to enable a way for the content to be
processed, typically by indicating either its type (e.g. "jpeg", "word document") or the name of a tool
which can be used to process it. Important meta-data include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>size of the content;</p>
</li>
<li>
<p>natural language, if any.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any encapsulated data item may be a summary, "thumbnail" or otherwise reduced form of an original
content item found outside the EHR, in some other system or file-system.
Checksums must be expressible for those items for which a checksum is available, or for which the
system generates checksums to improve the quality of its internal data transmissions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_6"><a class="anchor" href="#_design_6"></a>9.1.2. Design</h4>
<div class="paragraph">
<p>The design approach used here is based on the following analysis.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Any encapsulated data item may be in some particular language, even if it is an image or other graphic form such as a biosignal with axis markings in a particular language;</p>
</li>
<li>
<p>The general structure of encapsulated content data items includes a block of bytes or characters representing the content, and various meta-data as appropriate, including:</p>
<div class="ulist">
<ul>
<li>
<p>size</p>
</li>
<li>
<p>character encoding</p>
</li>
<li>
<p>compression type/algorithm</p>
</li>
<li>
<p>name of formalism for parsable content</p>
</li>
</ul>
</div>
</li>
<li>
<p>For encapsulated items that have a counterpart in another system, the standard means of portable address is the W3C URI;</p>
</li>
<li>
<p>For items may that have an associated integrity checksum, the checksum is itself a series of bytes, and the type of checksum must also be specified, e.g. "md5".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These observations lead naturally to an abstract <code>DV_ENCAPSULATED</code> class, with two subtypes,
<code>DV_PARSABLE</code>, for all content which is syntactic in nature, and <code>DV_MULTIMEDIA</code> for everything else.
Note that it is possible to imagine parsable content items which are large, stored in compressed form,
and are themselves a summary of another item elsewhere on the web; such items can for practical
purposes be represented as instances of <code>DV_MULTIMEDIA</code>, rather than <code>DV_PARSABLE</code>. The vast
majority of parsable encapsulated data are expected to be short and stored in native textual form, e.g.
fragments of XML or HTML.</p>
</div>
<div class="paragraph">
<p>The formal model of the classes <code>DV_ENCAPSULATED</code> and <code>DV_MULTIMEDIA</code> are closely based on the
ED type from the HL7v3 data types specification.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_6"><a class="anchor" href="#_class_descriptions_6"></a>9.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_encapsulated_class"><a class="anchor" href="#_dv_encapsulated_class"></a>9.2.1. DV_ENCAPSULATED Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_ENCAPSULATED (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract class defining the common meta-data of all types of encapsulated data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>charset</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of character encoding scheme in which this value is encoded. Coded from openEHR Code Set  character sets . Unicode is the default assumption in openEHR, with UTF-8 being the assumed encoding. This attribute allows for variations from these assumptions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional indicator of the localised language in which the data is written, if relevant. Coded from openEHR Code Set  languages.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Original size in bytes of unencoded encapsulated data. I.e. encodings such as base64, hexadecimal etc. do not change the value of this attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Size_valid</em></strong>: size &gt;= 0</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Language_valid</em></strong>: language /= Void implies code_set (Code_set_id_languages).has_code (language)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Charset_valid</em></strong>: charset /= Void implies code_set (Code_set_id_character_sets).has_code (charset)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_multimedia_class"><a class="anchor" href="#_dv_multimedia_class"></a>9.2.2. DV_MULTIMEDIA Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_MULTIMEDIA</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A specialisation of DV_ENCAPSULATED for audiovisual and biosignal types. Includes further metadata relating to multimedia types which are not applicable to other subtypes of DV_ENCAPSULATED.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_ENCAPSULATED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>alternate_text</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Text to display in lieu of multimedia display/replay.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uri</strong>: <code>DV_URI</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>URI reference to electronic information stored outside the record as a file, database entry etc, if supplied as a reference.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code>Byte</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The actual data found at uri, if supplied inline.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>media_type</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Data media type coded from openEHR code set  media types  (interface for the IANA MIME types code set).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>compression_algorithm</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Compression type, a coded value from the openEHR  Integrity check  code set. Void means no compression.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>integrity_check</strong>: <code>Byte</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Binary cryptographic integrity checksum.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>integrity_check_algorithm</strong>: <code>List&lt;CODE_PHRASE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Type of integrity check, a coded value from the openEHR  Integrity check  code set.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>thumbnail</strong>: <code>DV_MULTIMEDIA</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The thumbnail for this item, if one exists; mainly for graphics formats.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_external</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Computed from the value of the uri attribute: True if  the data is stored externally to the record, as indicated by `uri'. A copy may also be stored internally, in which case `is_expanded' is also true.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_inline</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Computed from the value of the data attribute. True if  the  data is stored  in  expanded  form, ie within the EHR itself.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_compressed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Computed from the value of the compression_algorithm attribute: True if  the  data is stored  in  compressed form.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_integrity_check</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Computed from the value of the integrity_check_algorithm attribute: True if an integrity check has been computed.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Original size in bytes of unencoded encapsulated data. I.e. encodings such as base64, hexadecimal etc do not change the value of this attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Not_empty</em></strong>: is_inline or is_external</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Media_type_valid</em></strong>: media_type /= Void and then code_set (Code_set_id_media_types).has_code (media_type)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Compression_algorithm_validity</em></strong>: compression_algorithm /= Void implies code_set (Code_set_id_compression_algorithms).has_code (compression_algorithm)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Integrity_check_validity</em></strong>: integrity_check /= Void implies integrity_check_algorithm /= Void</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Integrity_check_algorithm_validity</em></strong>: integrity_check_algorithm /= Void implies code_set (Code_set_id_integrity_check_algorithms).has_code (integrity_check_algorithm)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_parsable_class"><a class="anchor" href="#_dv_parsable_class"></a>9.2.3. DV_PARSABLE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PARSABLE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Encapsulated data expressed as a parsable String. The internal model of the data item is not described in the openEHR model in common with other encapsulated types, but in this case, the form of the data is assumed to be plaintext, rather than compressed or other types of large binary data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_ENCAPSULATED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The string, which may validly be empty in some syntaxes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formalism</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of the formalism, e.g.  GLIF 1.0 ,  Proforma  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Size in bytes of value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Formalism_valid</em></strong>: not formalism.is_empty</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uri_package"><a class="anchor" href="#_uri_package"></a>10. Uri Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_8"><a class="anchor" href="#_overview_8"></a>10.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.uri</code> package includes two types used for referring to information resources. The
<code>DV_URI</code> type allows data values which are references to objects on the world wide web to be created.
Its specialisation, <code>DV_EHR_URI</code>, enables any element in an openEHR record to be identified in the
same way as other objects on the web. The <code>DV_EHR_URI</code> type is convenient, because it is a string,
like any other URI, and is therefore easily transportable and processable. Because it has its own
scheme space, "ehr", instances can be globally unique, as long as EHR identification is globally
unique. <code>DV_EHR_URIs</code> are used to express all runtime paths in the EHR. The uri Package is illustrated
below.</p>
</div>
<div id="rm_data_types_uri" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-data_types.uri.svg" alt="RM data types.uri">
</div>
<div class="title">Figure 12. rm.data_types.uri package</div>
</div>
<div class="sect3">
<h4 id="_requirements_7"><a class="anchor" href="#_requirements_7"></a>10.1.1. Requirements</h4>
<div class="paragraph">
<p>This package meets the requirement for a <code>DATA_VALUE</code> subtype which represents a W3C Uniform
Resource Identifier (URI). A common example of where this might be used is to represent a reference
to a clinical guideline or other justifying document associated with an intervention or treatment plan
recorded in the EHR.</p>
</div>
<div class="paragraph">
<p>URIs are a superset of Uniform Resource Locators (URLs) (although the two are often confused,
even within the W3C), and can be used to specify the location of any information item, regardless of
its type, location or storage method, as long as a URI "scheme" exists for that type of information.</p>
</div>
<div class="paragraph">
<p>There is an additional requirement for a kind of URI that can point at an EHR data item, either inside
the same EHR containing the link, or in another EHR. This is the basis of implementing the <code>LINK</code>
type.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_7"><a class="anchor" href="#_design_7"></a>10.1.2. Design</h4>
<div class="paragraph">
<p>A simple design approach is used whereby a URI is represented as a String, and appropriate functions
are defined to extract the various parts according to the syntax of URIs defined by Tim Berners-Lee
<a href="#rfc_2396">[rfc_2396]</a>. An EHR specific subtype is defined, whose scheme is
"ehr", and which contains further attributes enabling the instances of the type to record what kind of
object they are referring to.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_definitions"><a class="anchor" href="#_definitions"></a>10.2. Definitions</h3>
<div class="paragraph">
<p>The following symbolic definitions are used in the classes below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Ehr_scheme</em>: String is "ehr"</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_7"><a class="anchor" href="#_class_descriptions_7"></a>10.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_uri_class"><a class="anchor" href="#_dv_uri_class"></a>10.3.1. DV_URI Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_URI</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A reference to an object which conforms to the Universal Resource Identifier (URI) standard, as defined by W3C RFC 2936. See "Universal Resource Identifiers in WWW" by Tim Berners-Lee at <a href="http://www.ietf.org/rfc/rfc2396.txt" class="bare">http://www.ietf.org/rfc/rfc2396.txt</a>. This  is  a  World-Wide  Web  RFC for  global identification  of resources.
See <a href="http://www.w3.org/Addressing" class="bare">http://www.w3.org/Addressing</a> for a starting point on URIs.
See <a href="http://www.ietf.org/rfc/rfc2806.txt" class="bare">http://www.ietf.org/rfc/rfc2806.txt</a> for new URI types like telephone, fax and modem numbers.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DATA_VALUE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value of URI as a String.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scheme</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A distributed information "space" in which  information objects  exist. The scheme simultaneously specifies an information space and a mechanism for accessing objects in  that  space.  For  example  if  scheme  = "ftp", it identifies the information space in which  all  ftpable objects  exist,  and also the application - ftp - which can be used to access them. Values may include: "ftp", "telnet", "mailto", "gopher" and  many others. Refer to WWW URI RFC for a full list. New information spaces can be accommodated  within  the URI specification.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A string whose format is  a  function  of  the  scheme. Identifies   the   location  in  &lt;scheme&gt;-space  of  an information entity. Typical values include hierarchical directory  paths  for  any  machine.  For example, with scheme = "ftp", path might be /pub/images/image_01. The strings "." and ".." are reserved for use in the path. Paths may include internet/intranet location identifiers of the form: sub_domain&#8230;&#8203;domain, e.g. "info.cern.ch"</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fragment_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A part of, a  fragment  or  a  sub-function  within  an object. Allows references to sub-parts of objects, such as a certain line and character  position  in  a  text object. The  syntax  and semantics are defined by the application responsible for the object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>query</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Query string to send to application implied  by  scheme and  path.  Enables  queries  to applications, including databases  to  be  included in  the  URI. Supports any query meaningful to the server, including SQL.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Value_valid</em></strong>: not value.is_empty</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_ehr_uri_class"><a class="anchor" href="#_dv_ehr_uri_class"></a>10.3.2. DV_EHR_URI Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_EHR_URI</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A DV_EHR_URI is a DV_URI which has the scheme name  ehr , and which can only reference elements in EHRs.</p>
</div>
<div class="paragraph">
<p>Used to reference elements in an EHR, which may be the current one, or another.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">DV_URI</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Scheme_valid</em></strong>: scheme.is_equal (Ehr_scheme)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes_3"><a class="anchor" href="#_syntaxes_3"></a>10.4. Syntaxes</h3>
<div class="sect3">
<h4 id="_dv_ehr_uri_syntax"><a class="anchor" href="#_dv_ehr_uri_syntax"></a>10.4.1. DV_EHR_URI Syntax</h4>
<div class="paragraph">
<p>The syntax of a <code>DV_EHR_URI</code> is an openEHR path, inside the "ehr" URI scheme-space, and is of the
form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"ehr://" ehr_path</pre>
</div>
</div>
<div class="paragraph">
<p>The syntax of ehr_path is described in the section on Paths in The openEHR Architecture Overview
document. `DV_EHR_URI`s are used as a mechanism for referencing in the EHR, ensuring readability
by humans, as well as validity when extracts are transmitted elsewhere: even if the target of a path is
not present, the path can be used to locate the missing item on demand.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_strategies"><a class="anchor" href="#_implementation_strategies"></a>11. Implementation Strategies</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_9"><a class="anchor" href="#_overview_9"></a>11.1. Overview</h3>
<div class="paragraph">
<p>This section notes a few of the general challenges for mapping the openEHR data types to implementation
technologies such as programming languages and XML. For specific guidelines, Implementation
Technology Specification (ITS) document for each target formalism should be consulted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_quantities_and_ordered_numeric"><a class="anchor" href="#_quantities_and_ordered_numeric"></a>11.2. Quantities and Ordered_numeric</h3>
<div class="paragraph">
<p>In the quantity package, the type <code>DV_QUANTIFIED</code> is shown having an abstract property of type
Ordered_numeric. This is intended to indicate that the type <code>DV_QUANTIFIED</code> is distinguished by
the magnitude property (compared to say <code>DV_ORDERED</code>, which describes ordered things without having
magnitudes). The type Ordered_numeric be mapped to various types in implementation technologies
as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java: <code>java.lang.Number</code></p>
</li>
<li>
<p>C#: <code>System.IComparable</code></p>
</li>
<li>
<p>Eiffel: <code>NUMERIC</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these type systems currently suffer from not having a single type whose meaning is both
"ordered" (having the function '&lt;') and "numeric" (having the functions '+', '-', '*', '/') but in practice
it does not matter much. For type systems with no convenient supertype of the numeric concrete
types <code>Real</code>, <code>Integer</code>, <code>Double</code>, the <code><em>magnitude</em></code> property can safely be left out of <code>DV_QUANTIFIED</code>;
the only drawback is that code cannot call <code>DV_QUANTIFIED</code>.<code><em>magnitude</em></code> polymmorphically, e.g. in a
statistical application processing <code>DV_QUANTITY</code> and <code>DV_COUNT</code> objects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unicode"><a class="anchor" href="#_unicode"></a>11.3. Unicode</h3>
<div class="paragraph">
<p>Unicode is supported in various ways in different languages. In Java, since JDK 1.1, unicode support
is implicit in the base classes. From the documentation:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>the classes java.io.InputStreamReader, java.io.OutputStreamWriter, and
java.lang.String can convert between Unicode and a number of other character
encodings. More information is available at:
http://java.sun.com/j2se/1.3/docs/guide/intl/encoding.doc.html.</pre>
</div>
</div>
<div class="paragraph">
<p>In the C# language, conversion can be done between Unicode and other codepages using the System.
<code>Text.UnicodeEncoding</code> (for UTF-16) and <code>System.Text.UTF8Encoding</code> (for UTF-8) classes.</p>
</div>
<div class="paragraph">
<p>In XML unicode is handled by specifying the encoding of the document in the XML declaration, e.g.
<code>&lt;?xml version="1.0" encoding="UTF-16"?&gt;</code>.</p>
</div>
<div class="paragraph">
<p>In the Eiffel language, unicode is available in the Gobo public domain library (see
<a href="http://www.gobosoft.com" class="bare">http://www.gobosoft.com</a>), in the <code>UC_STRING</code> class, which inherits from the String class.
The support in other languages varies, and may require a special type like the <code>UC_STRING</code> used in
Eiffel.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dates_and_times"><a class="anchor" href="#_dates_and_times"></a>11.4. Dates and Times</h3>
<div class="paragraph">
<p>In some formalisms, dates and times are represented using a single calendar-like class. This is not
considered to be good practice from the point of specification, since it is more difficult to state proper
invariants for such a class used to represent a particular logical type such as a <code>DATE</code> or <code>TIME</code>, however,
its utility in implementation is recognised.</p>
</div>
<div class="paragraph">
<p>Where implementors want to use such a class (call it <code>CALENDAR</code> here for the sake of discussion) the
recommended approach is to wrap the class <code>CALENDAR</code> with classes representing the types described
in this specification, i.e. <code>DATE</code> etc. This enables the addition of any necessary functionality in the
wrapper for example, for serialising and deserialising in and out of XML.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparison_with_hl7v3_types"><a class="anchor" href="#_comparison_with_hl7v3_types"></a>Appendix A: Comparison with HL7v3 Types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_scope_2"><a class="anchor" href="#_scope_2"></a>A.1. Scope</h3>
<div class="paragraph">
<p>Some HL7v3 types are not modelled in openEHR. HL7v3 V3DT types which are assumed by
openEHR to exist in the underlying type system of any implementation technology include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer (<code>INT</code>)</p>
</li>
<li>
<p>Real (<code>REAL</code>)</p>
</li>
<li>
<p>Set (<code>SET</code>)</p>
</li>
<li>
<p>List (<code>LIST</code>)</p>
</li>
<li>
<p>Bag (<code>BAG</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>HL7v3 types which are not modelled here because they are almost always too volatile for concrete
modelling, and can be created with archetyped generic information structures are as follows (even in
HL7 they are really data structures rather than data types):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Postal address (<code>AD</code>)</p>
</li>
<li>
<p>Entity name (<code>EN</code>)</p>
</li>
<li>
<p>Person name (<code>PN</code>)</p>
</li>
<li>
<p>Organisation name (<code>ON</code>)</p>
</li>
<li>
<p>Trivial name (<code>TN</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These types are all modelled by archetyped spatial data structures in openEHR (equivalent to subtypes
of Structure in the CDA specification).
HL7v3 types which may need to be modelled in the future include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Uncertain value probabilistic (<code>UVP</code>)</p>
</li>
<li>
<p>Non-parametric probability distribution (<code>NPPD</code>)</p>
</li>
<li>
<p>Parametric probability distribution (<code>PPD</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Types which are provided by openEHR but not supported directly by HL7 include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>state variable (<code>DV_STATE</code>);</p>
</li>
<li>
<p>ordinal values (<code>DV_ORDINAL</code>);</p>
</li>
<li>
<p>explicit partial date and time types (<code>DV_DATE</code>, <code>DV_TIME</code>);</p>
</li>
<li>
<p>explicit time duration (<code>DV_DURATION</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Types in the latter two categories may be implementable with the <code>TS</code> (timestamp) type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_differences"><a class="anchor" href="#_design_differences"></a>A.2. Design Differences</h3>
<div class="paragraph">
<p>There are some significant differences in design approach between the openEHR data types and the
HL7v3 data types, described in the following sections.</p>
</div>
<div class="sect3">
<h4 id="_naming"><a class="anchor" href="#_naming"></a>A.2.1. Naming</h4>
<div class="paragraph">
<p>All types in the HL7 specification have two names, one short and one long. For example the type representing
physical quantities is known both as "PhysicalQuantity" and "PQ". While short names may
be reasonable for often-used types, someshort names are not obvious, e.g. "EN", "ON", "TN",
"NPPD" etc. Short names certainly have benefits for drawing tools such as Rational Rose or other
UML tools, however, it is questionable whether a formal model should include concept names chosen
on the basis of visual appearance in such tools (one might argue that such tools should provide aliases
for visual purposes, without changing the actual model). Another problem is that UML does not
include the concept of class name aliases, nor do most programming languages.</p>
</div>
<div class="paragraph">
<p>The openEHR model uses one name only for each class.</p>
</div>
</div>
<div class="sect3">
<h4 id="_identification"><a class="anchor" href="#_identification"></a>A.2.2. Identification</h4>
<div class="paragraph">
<p>The HL7 V3DT includes the types <code>II</code>, <code>UID</code>, <code>OID</code> and <code>UUID</code>. The <code>II</code> type is claimed to be for identifying
all kinds of entities, which we here classify as real-world entities ("RWEs") (such as people, vehicle
registrations, invoices) and informational entities ("IEs") - which in general are snapshots of data
representing an RWE in a computer system. One problem with RWE identification schemes is that
some are known (e.g. social security number) to produce fallible identifiers or situations where multiple
RWEs have the same identifier, or no identifier at all. Conversely, with well-controlled and internationally
agreed ways of issuing/generating information system identifiers (e.g. GUID, ISO OID) it
is thought that such identifiers can be made reliable, and indeed correspond 1:1 with their intended
IEs. However, a problem with IEs is that there are often duplicates and also multiple versions in time,
each intended to represent the same RWE (such as a particular person, observation or composition).</p>
</div>
<div class="paragraph">
<p>As far as can be ascertained currently, there is no standard analysis taking into account the existence
of IEs and RWEs, and recognising the fact that multiple versions and/or duplicates may refer to the
same RWE.</p>
</div>
<div class="paragraph">
<p>The approach taken in openEHR with respect to identifiers is currently as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RWE identifiers such as social security numbers, licence numbers, etc are modelled with the
type <code>DV_IDENTIFIER</code>, which has the attributes:</p>
<div class="ulist">
<ul>
<li>
<p><code><em>issuer</em></code>: <code>String</code></p>
</li>
<li>
<p><code><em>id</em></code>: <code>String</code></p>
</li>
<li>
<p><code><em>type</em></code>: <code>String</code>
The attributes listed above are nearly the same as for the HL7 II type, indicating that the two
types may be compatible.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Identification of IEs is done using the type <code>OBJECT_ID</code>, which is not a data type, and is documented
in the Support Information Model. The <code>OBJECT_ID</code> type takes into account the
fact that there may be multiple IEs referring to the same underlying RWE by adding a version
identifier (assumed to be a timestamp).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_archetyping"><a class="anchor" href="#_archetyping"></a>A.2.3. Archetyping</h4>
<div class="paragraph">
<p>The openEHR data types are defined on the assumption of archetype-based systems. While they will
work perfectly well in systems which know nothing about archetyping, some types are not defined
because archetypable structures built from more basic entities are assumed instead, rather than concretely
modelled data types. These include "types" for address and person name which are found in
HL7v3 and CEN 13606.</p>
</div>
</div>
<div class="sect3">
<h4 id="_treatment_of_inbuilt_types"><a class="anchor" href="#_treatment_of_inbuilt_types"></a>A.2.4. Treatment of Inbuilt Types</h4>
<div class="paragraph">
<p>The HL7v3 data types do not make any assumptions about the existence of types typically built-in to
most object and relational formalisms, such as the basic types <code>String</code>, <code>Integer</code>, <code>Boolean</code>, <code>Real</code>,
<code>Double</code>, and the generic types <code>Set&lt;T&gt;</code>, <code>Bag&lt;T&gt;</code> and <code>Array&lt;T&gt;</code>. Hence, the types <code>ST</code>, <code>INT</code>, <code>REAL</code>,
<code>BL</code>, <code>SET&lt;T&gt;</code>, <code>BAG&lt;T&gt;</code> and so on are redefined by HL7. The supposed advantage of this approach is
that the semantics of all types in the HL7 system, right down to atomic data items are self-contained
in the definition, and do not rely on external semantics. Possible problems with this approach include
the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The HL7 definitions diverge from the OMG IDL and ISO 11404 definitions of the basic data
types, which could cause unexpected problems in software development and data processing
which is done in typical development technologies (object-oriented and relational).</p>
</li>
<li>
<p>The HL7 types <code>INT</code> and <code>REAL</code> are defined as subtypes of the <code>QTY</code> type, a relationship that
does not exist in any object-oriented formalism for these types (in particular, there is no substitutability
of a type called Integer or Real for a type called Qty built in to any object language).
The definitions of <code>INT</code> and <code>REAL</code> are also different from those found in most object
formalisms. This might cause some difficulty in implementation.</p>
</li>
<li>
<p>The binary data type <code>BIN</code> is represented as a <code>List&lt;BL&gt;</code> (where each item can be True, False, null), whereas it would normally be expected to be something like <code>Array&lt;Octet&gt;</code> (i.e. an array of bytes) in most software environments. There does not appear to be any utility in defining it as <code>List&lt;BL&gt;</code>, since binary data is almost without exception represented and processed as contiguous arrays of machine bytes.</p>
</li>
<li>
<p>The string type <code>ST</code> inherits from the encapsulated data type <code>ED</code>, which in turn inherits from the binary data type <code>BIN</code>. The result of this is that an instance of <code>ST</code> contains numerous data attributes relating to multi-media data, and the content is presumably represented as a <code>List&lt;BL&gt;</code>. This is a major departure from the standard understanding of a string in computer sciences, which is usually simply an array of characters.</p>
</li>
<li>
<p>The HL7 boolean type <code>BL</code> is a three-valued logic type due to the null marker approach (see below), not the usual two-valued type found in the Boolean concept in programming languages. The same is true of <code>INT</code> and <code>REAL:</code> due to the null marker design, "null" is a possible return value of an integer or real as well as true integer and real values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general, where differences exist between same-named types in HL7 and an underlying formalism
such as a programming language, there is likely to be some confusion in implementation. Further,
there is likely to be confusion in how to process instances of basic types which contain numerous
(and sometimes recursive) fields which are not used in the standard specifications of basic types.
The openEHR approach with respect to inbuilt types is to assume only those types found in the mainstream
object-oriented programming languages, and in particular, definitive formalisms like OMG
IDL and XML. While this means there there is in theory less control over these types than in the HL7
approach, the number of types involved is quite small, and the problem of bindings to the basic types
of object formalisms is well understood. Additionally, since it is recognised that some data types
defined by openEHR could clash with types found in some languages and libraries, all data type class
names are prefaced with "DV_" to avoid naming confusion, and to allow implementations of
openEHR types to co-exist with existing types in implementation formalisms.</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_null_markers"><a class="anchor" href="#_use_of_null_markers"></a>A.2.5. Use of Null Markers</h4>
<div class="paragraph">
<p>All HL7 data types inherit from the <code>ANY</code> class (equivalent to the <code>DATA_VALUE</code> class in openEHR)
which contains the attributes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>BL nonNull;
CS nullFlavor;
BL isNull;</pre>
</div>
</div>
<div class="paragraph">
<p>The purpose of these attributes is to indicate whether a datum is Null, and for what reason. Since
some data type classes also appear as the attributes of other data types, the Null markers also indicate
whether any part of a datum is null. Thus, in the class Interval&lt;T&gt; shown below, all attributes have
the possibility of containing a Null marker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">type</span> <span class="tok-n">Interval</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">alias</span> <span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-kd">extends</span> <span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span>
<span class="tok-o">{</span>
    <span class="tok-n">T</span> <span class="tok-n">low</span><span class="tok-o">;</span>
    <span class="tok-n">BL</span> <span class="tok-n">lowClosed</span><span class="tok-o">;</span>
    <span class="tok-n">T</span> <span class="tok-n">high</span><span class="tok-o">;</span>
    <span class="tok-n">BL</span> <span class="tok-n">highClosed</span><span class="tok-o">;</span>
    <span class="tok-n">T</span><span class="tok-o">.</span><span class="tok-na">diff</span> <span class="tok-n">width</span><span class="tok-o">;</span>
    <span class="tok-n">T</span> <span class="tok-n">center</span><span class="tok-o">;</span>
    <span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-nf">hull</span><span class="tok-o">(</span><span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">x</span><span class="tok-o">);</span>
    <span class="tok-n">literal</span> <span class="tok-n">ST</span><span class="tok-o">;</span>
    <span class="tok-n">promotion</span> <span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">x</span><span class="tok-o">);</span>
    <span class="tok-n">demotion</span> <span class="tok-n">T</span><span class="tok-o">;</span>
<span class="tok-o">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, this allows an interval with missing ends and width to exist as a structured type. The
consequence of the approach is that the entire model is essentially a model of "partial" data types;
<em>any attribute and any function call may return a Null value, as well as the true values of its type</em> (in
fact, in the specification, Null values are defined to be valid values of all data types). This design
decision was taken in HL7 so that any datum, no matter how unknown, would be structurally representable
in the same way as completely known data, enabling it to be processed in the same way as all
other instances of the same type.</p>
</div>
<div class="paragraph">
<p>However, an important object-oriented design principle has been ignored in this approach. In the
proper design of classes, properties and class invariants are stated. Invariants are statements which
describe the correctness conditions of instances of the class; the general rule is that the post-condition
of a creation routine (constructor) of a class must be that the invariants are satisfied. For example, an
invariant of the HL7 <code>IVL&lt;T&gt;</code> class could be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(exists(low) and exists(high)) or else
(exists(low) and exists(width)) or else
(exists(width) and exists(high))</pre>
</div>
</div>
<div class="paragraph">
<p>When an instance of this class is created, this condition should be satisfied, and remain satisfied for
the life of the instance. To do otherwise is to create instances of data which other software can make
no assumptions about, and is forced to check every single field, and then determine what to do in an
ad hoc way. (See <a href="#Meyer_OOSC2">[Meyer_OOSC2]</a> p366, <a href="#Booch_1994">[Booch_1994]</a> p43, <a href="#Kilov_1994">[Kilov_1994]</a> p29 for detailed explanations of the invariant concept).
Possible consequences of the built-in Null marker design approach include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>since even HL7&#8217;s basic types <code>ST</code>, <code>INT</code>, <code>REAL</code>, <code>LIST&lt;&gt;</code>, <code>SET&lt;&gt;</code> include null markers, processing
of null values will be pervasive at the lowest level;</p>
</li>
<li>
<p>software will be more complex, both implementations of the data types, and of software
which handle them. This is because the software always has to deal with the possibility of
calls to routines and attributes returning Null values. Most clinical information systems to
date have taken the approach that a datum is either represented as an instance of a formal
type if fully known, or else as narrative text if only partial;</p>
</li>
<li>
<p>data may not be always be safely processable, since some software may not properly handle
the null values associated with attributes of partially known data items. Essentially, all software
which processes the data has to be "null-value aware", and make no assumptions at all
about whether a particular data instance is valid or not.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The HL7 data type model is in contrast with simpler approaches such as used in CEN, GEHR, and
openEHR, where data types are formal models of types such as Coded_term, Quantity and so on.
Rather than build the possibility of null markers into every attribute and class in the data types, a single
null marker is defined in relevant containing classes. This decision is based on the principle that
data types should be defined independently of their context of use. Hence, where data types are used
as data values, such as in the value attribute of the class <code>ELEMENT</code> from the openEHR EHR reference
model, the parallel features is_null and null_flavour are also defined. However, where data types
appear as attributes elsewhere in the model and there is no possibility of them being null, no null
markers are used. The figure below shows visually the difference between the two approaches.</p>
</div>
<div id="HL7_null_value" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/HL7_null_value.png" alt="HL7 null value" width="65%">
</div>
<div class="title">Figure 13. HL7 and Typical Null value approaches</div>
</div>
<div class="paragraph">
<p>The consequences of the standard software-engineering approach include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data types can be more easily formally specified, since the semantics of invariants, attributes and operations do not need to include the possibility of null values;</p>
</li>
<li>
<p>software implementations are simpler;</p>
</li>
<li>
<p>data are always guaranteed to be safely processable for decision support and general querying, since no instance of a formal type will be created in the first place if the datum is very unreliable;</p>
</li>
<li>
<p>null markers only appear in models where they are relevent, rather than everywhere data types are used;</p>
</li>
<li>
<p>however, the openEHR data types do not automatically deal with missing or unknown internal attribute values (such as missing high and low values for an interval, partial dates etc).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to deal with the last possibility, various approaches are used in openEHR:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for most data which is not fully known, no data type instance is created, and a null marker is created. Depending on the design of the revelant archetypes, there will usually be the possibility of recording the datum in narrative form;</p>
</li>
<li>
<p><code>ENTRYs</code> in the openEHR EHR reference model include a certainty:Boolean attribute, for recording a level of doubt;</p>
</li>
<li>
<p>for particular data types which are often partial, special features are defined. The main types affected are <code>DV_DATE</code>, <code>DV_TIME</code>, and <code>DV_DATE_TIME</code>; the properties month_unknown, day_unknown, minute_unknown, and second_unknown (based on ISO 8601 semantics) are used to define explicitly the semantics of dates with a missing day, times with missing seconds and so on;</p>
</li>
<li>
<p>Intervals of date/time types include types generated when the parameter type is one of the partial classes, thus, types <code>DV_INTERVAL&lt;DV_DATE&gt;</code> (where one or both ends has an unknown part) are possible. This covers the need for intervals in which some date is missing from the end date/times, while not allowing intervals with completely missing items to be created;</p>
</li>
<li>
<p>for expressing uncertainy more precisely, probability distribution data types (based on the types defined in HL7) can be used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A consequence of the HL7 model is that data instances represented in XML or another structured text
format will be structurally the same regardless of whether there are Null values or not. A structured
form for partially known data (which would normally break the invariants of its class) may well be
useful for representing the data as part of a text field, making it easier to use for whatever processing
is possible later on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_terminology_approach"><a class="anchor" href="#_terminology_approach"></a>A.2.6. Terminology Approach</h4>
<div class="paragraph">
<p>The approach in openEHR is to assume the existence of a Terminology Server which is the sole
authoritative interface with terminologies of any kind, and is the only entity which can assume
responsibility for querying, post-coordination or other manipulations of terms. No allowance is made
for coordination of "modifiers", "qualifiers" or any other terms outside the service. As a consequence,
there are no coordination facilities in the type <code>DV_CODED_TEXT</code>, a departure from earlier versions of
the specification - any term provided from the terminology service must already be "coordinated",
either by the terminology service, or by one of the terminologies it accesses. This places the responsibility
of combining terms firmly in the knowledge part of the system, and prevents unsanctioned,
unvalidated combinations being created elsewhere.</p>
</div>
</div>
<div class="sect3">
<h4 id="_date_time_approach"><a class="anchor" href="#_date_time_approach"></a>A.2.7. Date/Time Approach</h4>
<div class="paragraph">
<p>The HL7 specification uses a single <code>TS</code> type to represent all logical dates, times, date/times, and partial
versions thereof. The openEHR specification defines distinct types for each, since these are the
types which occur in the real world, and it is easier to specify correctness constraints with this
approach. It is recognised that a single type may be used by some implementors (depending on what
is available in the language being used), however, the recommended practice is to wrap any such
types with the logical types described in this specification. This approach reduces the possibility for
any errors in transmitted data (since no strange combinations of year, &#8230;&#8203; , second can occur not explicitly
described in the type definitions).</p>
</div>
</div>
<div class="sect3">
<h4 id="_time_specification_types"><a class="anchor" href="#_time_specification_types"></a>A.2.8. Time Specification Types</h4>
<div class="paragraph">
<p>The HL7 approach for time specification appears to cover all reasonable requirements, but has some
minor problems, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the types <code>PIVL</code> and <code>EIVL</code> are declared as being generic types (i.e. <code>PIVL&lt;T:TS&gt;</code>,
<code>EIVL&lt;T:TS&gt;</code>), when there appears to be no reason for this;</p>
</li>
<li>
<p>the <code>PIVL</code>.<code><em>phase</em></code> attribute is used to represent an interval during which a activity occurs,
example given is "2 minutes every 8 hours". However, the "2 mins" is almost always part of
a therapeutic prescription of some kind, not part of the timing specification as such. Thera
peutic prescriptions have the form "do X every Y time", where the X describes what to do,
and how long to do it for (e.g. 40 mins massage, administer a drug slowly over 10 mins). In
fact, what we are really interested in with a timing specification is the specification of the
starting points in time of some activity, not a time-based graph of on/off points, whch is
effectively what the <code>PIVL</code> type is now.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_type_conversions"><a class="anchor" href="#_type_conversions"></a>A.2.9. Type Conversions</h4>
<div class="paragraph">
<p>The HL7v3 data types specification allows various type conversions, as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Three kinds of type conversions are defined: promotion, demotion, and character string literals.
Type conversions can be implicit or explicit. Implicit type conversion occurs when a certain
type is expected (e.g. as an argument to a statement) but a different type is actually provided.</pre>
</div>
</div>
<div class="paragraph">
<p>One notable kind of conversion possible in HL7 is of a value of any type <code>T</code> into an instance of
<code>Set&lt;T&gt;</code>, <code>List&lt;T&gt;</code>, <code>Bag&lt;T&gt;</code> or <code>IVL&lt;T&gt;</code> containing the value.
The openEHR model does not provide for any type conversions other than those automatically available
between inbuilt basic numeric types such as Integer, Float and Double, and between types
related by inheritance, as supported by all object-oriented languages.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_publications"><a class="anchor" href="#_publications"></a>Publications</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Anderson_1996"></a>[Anderson_1996] Ross Anderson. <strong>Security in Clinical Information Systems</strong>. Available at <a href="http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html" class="bare">http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html</a>.</p>
</li>
<li>
<p><a id="Baretto_2005"></a>[Baretto_2005] Barretto S A. <strong>Designing Guideline-based Workflow-Integrated Electronic Health Records.</strong> 2005. PhD dissertation, University of South Australia. Available at <a href="http://www.cis.unisa.edu.au/~cissab/Barretto_PhD_Thesis_Revised_FINAL.pdf" class="bare">http://www.cis.unisa.edu.au/~cissab/Barretto_PhD_Thesis_Revised_FINAL.pdf</a>.</p>
</li>
<li>
<p><a id="Beale_2000"></a>[Beale_2000] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> 2000.  Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_2002"></a>[Beale_2002] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> Eleventh OOPSLA Workshop on Behavioral Semantics: Serving the Customer (Seattle, Washington, USA, November 4, 2002). Edited by Kenneth Baclawski and Haim Kilov. Northeastern University, Boston, 2002, pp. 16-32. Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_Heard_2007"></a>[Beale_Heard_2007] Beale T, Heard S. <strong>An Ontology-based Model of Clinical Information.</strong> 2007. pp760-764 Proceedings MedInfo 2007, K. Kuhn et al. (Eds), IOS Publishing 2007. See <a href="http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf" class="bare">http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf</a>.</p>
</li>
<li>
<p><a id="Booch_1994"></a>[Booch_1994] Booch G. <strong>Object-Oriented Analysis and Design with applications. 2nd ed.</strong> Benjamin/Cummings 1994.</p>
</li>
<li>
<p><a id="Browne_2005"></a>[Browne_2005] Browne E D. <strong>Workflow Modelling of Coordinated Inter-Health-Provider Care Plans.</strong> 2005. PhD dissertation, University of South Australia. Available at <a href="http://www.openehr.org/publications/workflow/t_browne_thesis_abstract.htm" class="bare">http://www.openehr.org/publications/workflow/t_browne_thesis_abstract.htm</a>.</p>
</li>
<li>
<p><a id="Cimino_1997"></a>[Cimino_1997] Cimino J J. <strong>Desiderata for Controlled Medical vocabularies in the Twenty-First Century.</strong> IMIA WG6 Conference, Jacksonville, Florida, Jan 19-22, 1997.</p>
</li>
<li>
<p><a id="Eiffel"></a>[Eiffel] Meyer B. <strong>Eiffel the Language (2nd Ed).</strong> Prentice Hall, 1992.</p>
</li>
<li>
<p><a id="Elstein_1987"></a>[Elstein_1987] Elstein AS, Shulman LS, Sprafka SA. <strong>Medical problem solving: an analysis of clinical reasoning.</strong> Cambridge, MA: Harvard University Press 1987.</p>
</li>
<li>
<p><a id="Elstein_Schwarz_2002"></a>[Elstein_Schwarz_2002] Elstein AS, Schwarz A. <strong>Evidence base of clinical diagnosis: Clinical problem solving and diagnostic decision making: selective review of the cognitive literature.</strong> BMJ 2002;324;729-732.</p>
</li>
<li>
<p><a id="Fowler_1997"></a>[Fowler_1997] Fowler M. <strong>Analysis Patterns: Reusable Object Models.</strong> Addison Wesley 1997</p>
</li>
<li>
<p><a id="Fowler_Scott_2000"></a>[Fowler_Scott_2000] Fowler M, Scott K. <strong>UML Distilled (2nd Ed.).</strong> Addison Wesley Longman 2000.</p>
</li>
<li>
<p><a id="Gray_reuter_1993"></a>[Gray_reuter_1993] Gray J, Reuter A. <strong>Transaction Processing Concepts and Techniques.</strong> Morgan Kaufmann 1993.</p>
</li>
<li>
<p><a id="Hein"></a>[Hein] Hein J L. Discrete Structures, Logic and Computability (2nd Ed). Jones and Bartlett 2002.</p>
</li>
<li>
<p><a id="Hnìtynka_2004"></a>[Hnìtynka_2004] Hnìtynka P, Plášil F. <strong>Distributed Versioning Model for MOF.</strong> Proceedings of WISICT 2004, Cancun, Mexico, A volume in the ACM international conference proceedings series, published by Computer Science Press, Trinity College Dublin Ireland, 2004.</p>
</li>
<li>
<p><a id="Ingram_1995"></a>[Ingram_1995] Ingram D. <strong>The Good European Health Record Project.</strong> Laires, Laderia Christensen, Eds. Health in the New Communications Age. Amsterdam: IOS Press; 1995; pp. 66-74.</p>
</li>
<li>
<p><a id="Kifer_Lausen_Wu_1995"></a>[Kifer_Lausen_Wu_1995] Kifer M, Lausen G, Wu J. <strong>Logical Foundations of Object-Oriented and FrameBased Languages.</strong> JACM May 1995. See See <a href="ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf" class="bare">ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf</a>.</p>
</li>
<li>
<p><a id="Kilov_1994"></a>[Kilov_1994] Kilov H, Ross J. <strong>Information Modelling - an object-oriented approach.</strong> Prentice Hall 1994.</p>
</li>
<li>
<p><a id="Maier_2000"></a>[Maier_2000] Maier M. <strong>Architecting Principles for Systems-of-Systems.</strong> Technical Report, University of Alabama in Huntsville. 2000. Available at <a href="http://www.infoed.com/Open/PAPERS/systems.htm" class="bare">http://www.infoed.com/Open/PAPERS/systems.htm</a></p>
</li>
<li>
<p><a id="Martin"></a>[Martin] Martin P. <strong>Translations between UML, OWL, KIF and the WebKB-2 languages (For-Taxonomy, Frame-CG, Formalized English)</strong>. May/June 2003. Available at <a href="http://www.webkb.org/doc/model/comparisons.html" class="bare">http://www.webkb.org/doc/model/comparisons.html</a> as at Aug 2004.</p>
</li>
<li>
<p><a id="Meyer_OOSC2"></a>[Meyer_OOSC2] Meyer B. <strong>Object-oriented Software Construction, 2nd Ed.</strong> Prentice Hall 1997</p>
</li>
<li>
<p><a id="Müller_2003"></a>[Müller_2003] Müller R. <strong>Event-oriented Dnamic Adaptation of Workflows: Model, Architecture, and Implementation.</strong> 2003. PhD dissertation, University of Leipzig. Available at <a href="http://www.openehr.org/publications/workflow/t_mueller_thesis_abstract.htm" class="bare">http://www.openehr.org/publications/workflow/t_mueller_thesis_abstract.htm</a>.</p>
</li>
<li>
<p><a id="Object_Z"></a>[Object_Z] Smith G. <strong>The Object Z Specification Language</strong>. Kluwer Academic Publishers 2000. See <a href="http://www.itee.uq.edu.au/~smith/objectz.html" class="bare">http://www.itee.uq.edu.au/~smith/objectz.html</a> .</p>
</li>
<li>
<p><a id="Rector_1994"></a>[Rector_1994] Rector A L, Nowlan W A, Kay S. <strong>Foundations for an Electronic Medical Record.</strong> The IMIA Yearbook of Medical Informatics 1992 (Eds. van Bemmel J, McRay A). Stuttgart Schattauer 1994.</p>
</li>
<li>
<p><a id="Rector"></a>[Rector] Rector A L. <strong>Clinical terminology: why is it so hard?</strong> Methods Inf Med. 1999 Dec;38(4-5):239-52. Available at <a href="http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf" class="bare">http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf</a> .</p>
</li>
<li>
<p><a id="Richards_1998"></a>[Richards_1998] Richards E G. <strong>Mapping Time - The Calendar and its History.</strong> Oxford University Press 1998.</p>
</li>
<li>
<p><a id="Sowa_2000"></a>[Sowa_2000] Sowa J F. <strong>Knowledge Representation: Logical, philosophical and Computational Foundations.</strong> 2000, Brooks/Cole, California.</p>
</li>
<li>
<p><a id="Sottile_1999"></a>[Sottile_1999] Sottile P.A., Ferrara F.M., Grimson W., Kalra D., and Scherrer J.R. <strong>The holistic healthcare information system. Toward an Electronic Health Record Europe.</strong> 1999. Nov 1999; 259-266.</p>
</li>
<li>
<p><a id="Van_de_Velde_Degoulet_2003"></a>[Van_de_Velde_Degoulet_2003] Van de Velde R, Degoulet P. <strong>Clinical Information Systems: A Component-Based Approach.</strong> 2003. Springer-Verlag New York.</p>
</li>
<li>
<p><a id="Weed_1969"></a>[Weed_1969] Weed LL. <strong>Medical records, medical education and patient care. 6 ed.</strong> Chicago: Year Book Medical Publishers Inc. 1969.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_resources"><a class="anchor" href="#_resources"></a>Resources</h3>
<div class="sect3">
<h4 id="_ontology"><a class="anchor" href="#_ontology"></a>Ontology</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="bfo"></a>[bfo] Institute for Formal Ontology and Medical Information Science (IFOMIS). <strong>Basic Formal Ontology (BFO).</strong> <a href="http://ifomis.uni-saarland.de/bfo/" class="bare">http://ifomis.uni-saarland.de/bfo/</a> .</p>
</li>
<li>
<p><a id="FMA"></a>[FMA] <a href="http://sig.biostr.washington.edu/projects/fm/" class="bare">http://sig.biostr.washington.edu/projects/fm/</a> .</p>
</li>
<li>
<p><a id="Horrocks_owl"></a>[Horrocks_owl] Patel-Schneider P, Horrocks I, Hayes P. <strong>OWL Web Ontology Language Semantics and Abstract Syntax.</strong> See <a href="http://w3c.org/TR/owl-semantics/" class="bare">http://w3c.org/TR/owl-semantics/</a> .</p>
</li>
<li>
<p><a id="IAO"></a>[IAO] <strong>Information Artefact Ontology</strong>.  <a href="https://code.google.com/p/information-artifact-ontology/" class="bare">https://code.google.com/p/information-artifact-ontology/</a> .</p>
</li>
<li>
<p><a id="OBO"></a>[OBO] <strong>The Open Biological and Biomedical Ontologies</strong>. See <a href="http://www.obofoundry.org/" class="bare">http://www.obofoundry.org/</a> .</p>
</li>
<li>
<p><a id="OGMS"></a>[OGMS] <strong>Ontology for General Medical Science (OGMS)</strong>. <a href="https://code.google.com/p/ogms/" class="bare">https://code.google.com/p/ogms/</a> .</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_general"><a class="anchor" href="#_general"></a>General</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="cov_contra"></a>[cov_contra] Wikipedia. <strong>Covariance and contravariance.</strong> See <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science" class="bare">https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science</a>) .</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_e_health_standards"><a class="anchor" href="#_e_health_standards"></a>e-Health Standards</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="ENV_13606-1"></a>[ENV_13606-1] <strong>ENV 13606-1 - Electronic healthcare record communication - Part 1: Extended architecture.</strong> CEN/ TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ENV_13606-2"></a>[ENV_13606-2] <strong>ENV 13606-2 - Electronic healthcare record communication - Part 2: Domain term list.</strong> CEN/TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ENV_13606-3"></a>[ENV_13606-3] <strong>ENV 13606-3 - Electronic healthcare record communication - Part 3: Distribution rules.</strong> CEN/TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ENV_13606-4"></a>[ENV_13606-4] <strong>ENV 13606-4 - Electronic Healthcare Record Communication standard Part 4: Messages for the exchange of information.</strong> CEN/ TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="Corbamed_PIDS"></a>[Corbamed_PIDS] Object Management Group. <strong>Person Identification Service.</strong> March 1999.</p>
</li>
<li>
<p><a id="Corbamed_LQS"></a>[Corbamed_LQS] Object Management Group. <strong>Lexicon Query Service.</strong> March 1999.</p>
</li>
<li>
<p><a id="HL7v3_ballot2"></a>[HL7v3_ballot2] JL7 International. <strong>HL7 version 3 2nd Ballot specification</strong>. Available at <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a>.</p>
</li>
<li>
<p><a id="HL7v3_data_types"></a>[HL7v3_data_types] Schadow G, Biron P. <strong>HL7 version 3 deliverable: Version 3 Data Types.</strong> (2nd ballot 2002 version).</p>
</li>
<li>
<p><a id="hl7_v3_rim"></a>[hl7_v3_rim] HL7. <strong>HL7 v3 RIM</strong>. See <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a> .</p>
</li>
<li>
<p><a id="ICD10AM"></a>[ICD10AM]. WHO / ACCD. International Classification of Diseases, 10th Revision, Australian Modifications. See <a href="https://www.accd.net.au/Icd10.aspx" class="bare">https://www.accd.net.au/Icd10.aspx</a></p>
</li>
<li>
<p><a id="IHTSDO"></a>[IHTSDO] International Health Terminology Standards Development Organisation (IHTSDO). <a href="http://www.ihtsdo.org" class="bare">http://www.ihtsdo.org</a>.</p>
</li>
<li>
<p><a id="IHTSDO_URIs"></a>[IHTSDO_URIs] IHTSDO. SNOMED CT URI Standard. <a href="http://ihtsdo.org/fileadmin/user_upload/doc/download/doc_UriStandard_Current-en-US_INT_20140527.pdf?ok" class="bare">http://ihtsdo.org/fileadmin/user_upload/doc/download/doc_UriStandard_Current-en-US_INT_20140527.pdf?ok</a>.</p>
</li>
<li>
<p><a id="NLM_UML_list"></a>[NLM_UML_list] National Library of Medicine. UMLS Terminologies List. <a href="http://www.nlm.nih.gov/research/umls/metaa1.html" class="bare">http://www.nlm.nih.gov/research/umls/metaa1.html</a>.</p>
</li>
<li>
<p><a id="SNOMED_CT"></a>[SNOMED_CT] IHTSDO. Sytematised Nomenclature for Medicine. See <a href="http://www.ohtsdo.org" class="bare">http://www.ohtsdo.org</a>.</p>
</li>
<li>
<p><a id="WHO_ICD"></a>[WHO_ICD] World Health Organisation (WHO). <strong>International Classification of Diseases (ICD).</strong> See: <a href="http://www.who.int/classifications/icd/en/" class="bare">http://www.who.int/classifications/icd/en/</a> .</p>
</li>
<li>
<p><a id="ISO_18308"></a>[ISO_18308] Schloeffel P. (Editor). <strong>Requirements for an Electronic Health Record Reference Architecture.</strong> (ISO TC 215/SC N; ISO/WD 18308). International Standards Organisation, Australia, 2002.</p>
</li>
<li>
<p><a id="ISO_20514"></a>[ISO_20514] ISO. <strong>The Integrated Care EHR.</strong> See <a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39525" class="bare">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39525</a> .</p>
</li>
<li>
<p><a id="UCUM"></a>[UCUM] Schadow G, McDonald C J. <strong>The Unified Code for Units of Measure, Version 1.4</strong> 2000. Regenstrief Institute for Health Care, Indianapolis. See <a href="http://aurora.rg.iupui.edu/UCUM" class="bare">http://aurora.rg.iupui.edu/UCUM</a></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_e_health_projects"><a class="anchor" href="#_e_health_projects"></a>e-Health Projects</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="CIMI"></a>[CIMI] Clinical Information Modelling Initiative (CIMI) Project. See <a href="http://opencimi.org" class="bare">http://opencimi.org</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_14"></a>[EHCR_supA_14] Dixon R, Grubb P A, Lloyd D, and Kalra D. <strong>Consolidated List of Requirements. EHCR Support Action Deliverable 1.4.</strong> European Commission DGXIII, Brussels; May 2001 59pp Available from <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_35"></a>[EHCR_supA_35] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 3.5: "Final Recommendations to CEN for future work".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_24"></a>[EHCR_supA_24] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 2.4 "Guidelines on Interpretation and implementation of CEN EHCRA".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p>[<a id="EHCR_supA_31_32"></a> Lloyd D, et al. <strong>EHCR Support Action Deliverable 3.1&amp;3.2 “Interim Report to CEN”.</strong> July 1998. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="GEHR_del_4"></a>[GEHR_del_4] <strong>Deliverable 4: GEHR Requirements for Clinical Comprehensiveness.</strong> GEHR Project 1992</p>
</li>
<li>
<p><a id="GEHR_del_7"></a>[GEHR_del_7] <strong>Deliverable 7: Clinical Functional Specifications.</strong> GEHR Project 1993</p>
</li>
<li>
<p><a id="GEHR_del_8"></a>[GEHR_del_8] <strong>Deliverable 8: Ethical and legal Requirements of GEHR Architecture and Systems.</strong> GEHR Project 1994</p>
</li>
<li>
<p><a id="GEHR_del_19_20_24"></a>[GEHR_del_19_20_24] <strong>Deliverable 19,20,24: GEHR Architecture.</strong> GEHR Project 30/6/1995</p>
</li>
<li>
<p><a id="GeHR_AUS"></a>[GeHR_AUS] Heard S, Beale T. <strong>The Good Electronic Health Record (GeHR) (Australia).</strong> See <a href="http://www.openehr.org/resources/related_projects#gehraus" class="bare">http://www.openehr.org/resources/related_projects#gehraus</a> .</p>
</li>
<li>
<p><a id="GeHR_Aus_gpcg"></a>[GeHR_Aus_gpcg] Heard S. <strong>GEHR Project Australia, GPCG Trial.</strong> Available at <a href="http://www.gehr.org/gpcg/ehra.htm" class="bare">http://www.gehr.org/gpcg/ehra.htm</a>.</p>
</li>
<li>
<p><a id="GeHR_Aus_req"></a>[GeHR_Aus_req] Beale T, Heard S. <strong>GEHR Technical Requirements.</strong> See <a href="http://www.gehr.org/technical/requirements/gehr_requirements.html" class="bare">http://www.gehr.org/technical/requirements/gehr_requirements.html</a>.</p>
</li>
<li>
<p><a id="Synapses_req_A"></a>[Synapses_req_A] Kalra D. (Editor). <strong>The Synapses User Requirements and Functional Specification (Part A).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1a. 6 chapters, 176 pages.</p>
</li>
<li>
<p><a id="Synapses_req_B"></a>[Synapses_req_B] Grimson W. and Groth T. (Editors). <strong>The Synapses User Requirements and Functional Specification (Part B).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1b.</p>
</li>
<li>
<p><a id="Synapses_odp"></a>[Synapses_odp] Kalra D. (Editor). <strong>Synapses ODP Information Viewpoint.</strong> EU Telematics Application Programme, Brussels; 1998; The Synapses Project: Final Deliverable. 10 chapters, 64 pages.</p>
</li>
<li>
<p><a id="synex"></a>[synex] University College London. <strong>SynEx project</strong>. <a href="http://www.chime.ucl.ac.uk/HealthI/SynEx/" class="bare">http://www.chime.ucl.ac.uk/HealthI/SynEx/</a> .</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_general_standards"><a class="anchor" href="#_general_standards"></a>General Standards</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="OCL"></a>[OCL] <strong>The Object Constraint Language 2.0.</strong> Object Management Group (OMG). Available at <a href="http://www.omg.org/cgi-bin/doc?ptc/2003-10-14" class="bare">http://www.omg.org/cgi-bin/doc?ptc/2003-10-14</a> .</p>
</li>
<li>
<p><a id="IANA"></a>[IANA] IANA. <a href="http://www.iana.org/" class="bare">http://www.iana.org/</a>.</p>
</li>
<li>
<p><a id="IEEE_828"></a>[IEEE_828] IEEE. <strong>IEEE 828-2005: standard for Software Configuration Management Plans.</strong></p>
</li>
<li>
<p><a id="ISO_8601"></a>[ISO_8601] <strong>ISO 8601 standard describing formats for representing times, dates, and durations.</strong> See e.g. <a href="http://www.mcs.vuw.ac.nz/technical/software/SGML/doc/iso8601/ISO8601.html" class="bare">http://www.mcs.vuw.ac.nz/technical/software/SGML/doc/iso8601/ISO8601.html</a> and <a href="http://www.cl.cam.ac.uk/~mgk25/iso-time.html" class="bare">http://www.cl.cam.ac.uk/~mgk25/iso-time.html</a>.</p>
</li>
<li>
<p><a id="ISO_2788"></a>[ISO_2788] ISO. ISO 2788 <strong>Guide to Establishment and development of monolingual thesauri</strong>.</p>
</li>
<li>
<p><a id="ISO_5964"></a>[ISO_5964] ISO. ISO 5964 <strong>Guide to Establishment and development of multilingual thesauri</strong>.</p>
</li>
<li>
<p><a id="Perl_regex"></a>[Perl_regex] Perl.org. <strong>Perl Regular Expressions</strong>. Available at <a href="http://perldoc.perl.org/perlre.html" class="bare">http://perldoc.perl.org/perlre.html</a> .</p>
</li>
<li>
<p><a id="Protege"></a>[Protege] Stanford University. See <a href="http://protege.stanford.edu/" class="bare">http://protege.stanford.edu/</a> .</p>
</li>
<li>
<p><a id="rfc_2396"></a>[rfc_2396] Berners-Lee T. <strong>Universal Resource Identifiers in WWW</strong>. Available at <a href="http://www.ietf.org/rfc/rfc2396.txt" class="bare">http://www.ietf.org/rfc/rfc2396.txt</a>. This is a World-Wide Web RFC for global identification of resources. In current use on the web, e.g. by Mosaic, Netscape and similar tools. See <a href="http://www.w3.org/Addressing" class="bare">http://www.w3.org/Addressing</a> for a starting point on URIs.</p>
</li>
<li>
<p><a id="rfc_2440"></a>[rfc_2440] <strong>RFC 2440: OpenPGP Message Format</strong>. See <a href="http://www.ietf.org/rfc/rfc2440.txt" class="bare">http://www.ietf.org/rfc/rfc2440.txt</a> and <a href="http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt" class="bare">http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt</a></p>
</li>
<li>
<p><a id="rfc_3896"></a>[rfc_3896] <strong>RFC 3986: Uniform Resource Identifier (URI): Generic Syntax</strong>. IETF. See <a href="http://www.ietf.org/rfc/rfc3986.txt" class="bare">http://www.ietf.org/rfc/rfc3986.txt</a> .</p>
</li>
<li>
<p><a id="rfc_4122"></a>[rfc_4122] <strong>RFC 4122: A Universally Unique IDentifier (UUID) URN Namespace</strong>. IETF. See <a href="http://www.ietf.org/rfc/rfc4122.txt" class="bare">http://www.ietf.org/rfc/rfc4122.txt</a> .</p>
</li>
<li>
<p><a id="rfc_2781"></a>[rfc_2781] IETF. <strong>RFC 2781: UTF-16, an encoding of ISO 10646</strong> See <a href="http://tools.ietf.org/html/rfc2781" class="bare">http://tools.ietf.org/html/rfc2781</a>.</p>
</li>
<li>
<p><a id="rfc_5646"></a>[rfc_5646] IETF. <strong>RFC 5646.</strong> Available at <a href="http://tools.ietf.org/html/rfc5646" class="bare">http://tools.ietf.org/html/rfc5646</a>.</p>
</li>
<li>
<p><a id="sem_ver"></a>[sem_ver] <strong>Semantic Versioning</strong>. <a href="http://semver.org" class="bare">http://semver.org</a> .</p>
</li>
<li>
<p><a id="Xpath"></a>[Xpath] W3C <strong>Xpath 1.0 specification</strong>. 1999. Available at <a href="http://www.w3.org/TR/xpath" class="bare">http://www.w3.org/TR/xpath</a>.</p>
</li>
<li>
<p><a id="uri_syntax"></a>[uri_syntax] <strong>Uniform Resource Identifier (URI): Generic Syntax, Internet proposed standard</strong>. January 2005. see <a href="http://www.ietf.org/rfc/rfc3986.txt" class="bare">http://www.ietf.org/rfc/rfc3986.txt</a> .</p>
</li>
<li>
<p><a id="w3c_owl"></a>[w3c_owl] W3C. <strong>OWL - the Web Ontology Language</strong>. See <a href="http://www.w3.org/TR/2003/CR-owl-ref-20030818/" class="bare">http://www.w3.org/TR/2003/CR-owl-ref-20030818/</a> .</p>
</li>
<li>
<p><a id="w3c_xpath"></a>[w3c_xpath] W3C. <strong>XML Path Language</strong>. See <a href="http://w3c.org/TR/xpath" class="bare">http://w3c.org/TR/xpath</a> .</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openehr_resources"><a class="anchor" href="#_openehr_resources"></a>openEHR Resources</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="openehr_18308"></a>[openehr_18308] The openEHR Foundation. <strong>Conformance of openEHR architecture to ISO TS 18308, "Requirements for EHR Architectures"</strong>. See <a href="http://www.openehr.org/releases/trunk/architecture/iso18308_conformance.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/iso18308_conformance.pdf</a>.</p>
</li>
<li>
<p><a id="openEHR_ADL_workbench"></a>[openEHR_ADL_workbench] The openEHR Foundation. <strong>The openEHR ADL Workbench</strong>. <a href="http://www.openehr.org/downloads/ADLworkbench/home" class="bare">http://www.openehr.org/downloads/ADLworkbench/home</a> .</p>
</li>
<li>
<p><a id="openehr_am_overview"></a>[openehr_am_overview] The openEHR Foundation. <strong>The openEHR Archetypes Technical Overview.</strong> See <a href="http://www.openehr.org/releases/AM/dev/Overview.html" class="bare">http://www.openehr.org/releases/AM/dev/Overview.html</a>.</p>
</li>
<li>
<p><a id="openehr_am_adl"></a>[openehr_am_adl] The openEHR Foundation. <strong>Archetype Definition Language (ADL2).</strong> Available at <a href="http://www.openehr.org/releases/AM/dev/ADL2.html" class="bare">http://www.openehr.org/releases/AM/dev/ADL2.html</a>.</p>
</li>
<li>
<p><a id="openehr_am_aom"></a>[openehr_am_aom] The openEHR Foundation. <strong>Archetype Object Model (AOM2).</strong> Available at <a href="http://www.openehr.org/releases/AM/dev/AOM2.html" class="bare">http://www.openehr.org/releases/AM/dev/AOM2.html</a>.</p>
</li>
<li>
<p><a id="openehr_am_identification"></a>[openehr_am_identification] The openEHR Foundation. <strong>Archetype Identification specification.</strong> Available at <a href="http://www.openehr.org/releases/AM/dev/Identification.html" class="bare">http://www.openehr.org/releases/AM/dev/Identification.html</a>.</p>
</li>
<li>
<p><a id="openehr_CKM"></a>[openehr_CKM] <strong>The openEHR Clinical Knowledge Manager (CKM)</strong>. See <a href="http://www.openEHR.org/ckm" class="bare">http://www.openEHR.org/ckm</a></p>
</li>
<li>
<p><a id="openehr_odin"></a>[openehr_odin] The openEHR Foundation. <strong>Object Data Instance Notation (ODIN).</strong> Available at <a href="http://www.openehr.org/releases/BASE/latest/odin.html" class="bare">http://www.openehr.org/releases/BASE/latest/odin.html</a>.</p>
</li>
<li>
<p><a id="openehr_overview"></a>[openehr_overview] The openEHR Foundation. <strong>The openEHR Architecture Overview.</strong> See <a href="http://www.openehr.org/releases/BASE/dev/architecture_overview.html" class="bare">http://www.openehr.org/releases/BASE/dev/architecture_overview.html</a>.</p>
</li>
<li>
<p><a id="openehr_query_aql"></a>[openehr_query_aql] The openEHR Foundation. <strong>The openEHR Archetype Query language (AQL)</strong>. See <a href="http://www.openehr.org/releases/QUERY/dev/AQL.html" class="bare">http://www.openehr.org/releases/QUERY/dev/AQL.html</a>.</p>
</li>
<li>
<p><a id="openehr_rm_data_types"></a>[openehr_rm_data_types] openEHR. <strong>Data Types Information Model.</strong> See <a href="http://www.openehr.org/releases/RM/dev/data_types.html" class="bare">http://www.openehr.org/releases/RM/dev/data_types.html</a>.</p>
</li>
<li>
<p><a id="openehr_rm_data_structures"></a>[openehr_rm_data_structures] openEHR. <strong>Data Structures Information Model.</strong> See <a href="http://www.openehr.org/releases/RM/dev/data_structures.html" class="bare">http://www.openehr.org/releases/RM/dev/data_structures.html</a>.</p>
</li>
<li>
<p><a id="openehr_rm_common"></a>[openehr_rm_common] openEHR. <strong>Common Information Model.</strong> See <a href="http://www.openehr.org/releases/RM/dev/common.html" class="bare">http://www.openehr.org/releases/RM/dev/common.html</a>.</p>
</li>
<li>
<p><a id="openehr_rm_ehr"></a>[openehr_rm_ehr] The openEHR Foundation. <strong>The EHR Information Model</strong>. <a href="http://www.openehr.org/releases/RM/dev/ehr.html" class="bare">http://www.openehr.org/releases/RM/dev/ehr.html</a>.</p>
</li>
<li>
<p><a id="openehr_rm_support"></a>[openehr_rm_support] openEHR. <strong>Support Information Model.</strong> See <a href="http://www.openehr.org/releases/RM/dev/support.html" class="bare">http://www.openehr.org/releases/RM/dev/support.html</a>.</p>
</li>
<li>
<p><a id="openehr_terminology"></a>[openehr_terminology] The openEHR Foundation. <strong>The openEHR Terminology</strong> <a href="http://www.openehr.org/releases/trunk/architecture/terminology.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/terminology.pdf</a></p>
</li>
<li>
<p><a id="openehr_terminology_resources"></a>[openehr_terminology_resources] The openEHR Foundation. <strong>The openEHR Terminology project (GitHub)</strong> <a href="https://github.com/openEHR/terminology" class="bare">https://github.com/openEHR/terminology</a> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-08-11 20:34:06 BST
</div>
</div>
</body>
</html>